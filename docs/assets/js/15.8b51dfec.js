(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{440:function(e,t,a){"use strict";a.r(t);var s=a(62),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("ul",[a("li",[e._v("Title: Indexing CSV")]),e._v(" "),a("li",[e._v("Start Date: 2021-04-9")]),e._v(" "),a("li",[e._v("Specification PR: "),a("a",{attrs:{href:"https://github.com/Meilisearch/specifications/pull/28",target:"_blank",rel:"noopener noreferrer"}},[e._v("PR-#28"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Discovery Issue: n/a")])]),e._v(" "),a("h1",{attrs:{id:"indexing-csv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#indexing-csv"}},[e._v("#")]),e._v(" Indexing CSV")]),e._v(" "),a("h2",{attrs:{id:"_1-functional-specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-functional-specification"}},[e._v("#")]),e._v(" 1. Functional Specification")]),e._v(" "),a("h3",{attrs:{id:"i-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#i-summary"}},[e._v("#")]),e._v(" I. Summary")]),e._v(" "),a("p",[e._v("To index documents, the body of the add documents request has to match a specific format. That specific format is then parsed and tokenized inside Meilisearch. After which, the documents added are in the pool of searchable and returnable documents.")]),e._v(" "),a("p",[e._v("A "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Comma-separated_values",target:"_blank",rel:"noopener noreferrer"}},[e._v("CSV"),a("OutboundLink")],1),e._v(" data format is broadly used to store and exchange data in a simple format.")]),e._v(" "),a("p",[e._v("Also, in order to boost write performance CSV data format is more suited than JSON for consequent datasets, as keys are not duplicated for every document.")]),e._v(" "),a("h4",{attrs:{id:"summary-key-points"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#summary-key-points"}},[e._v("#")]),e._v(" Summary Key Points")]),e._v(" "),a("ul",[a("li",[e._v("The header of the csv payload allows to name the attributes and type them.")]),e._v(" "),a("li",[a("code",[e._v("text/csv")]),e._v(" Content-Type header is now supported.")]),e._v(" "),a("li",[e._v("A new query parameter, "),a("code",[e._v("csvDelimiter")]),e._v(", has been introduced to customize the csv delimiter used in the document. It can change between two "),a("code",[e._v("documentAddition")]),e._v(".")]),e._v(" "),a("li",[e._v("The error cases have been strengthened and completed. See Errors part.")])]),e._v(" "),a("h3",{attrs:{id:"ii-motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ii-motivation"}},[e._v("#")]),e._v(" II. Motivation")]),e._v(" "),a("p",[e._v("We want to provide our users with an always improved usage experience. Currently, the engine only accepts JSON format as a data source. We want to give users the possibility of another simple data format, well known, to use. Thus, give them more versatility at the data source choices for the indexing (add and update) step.")]),e._v(" "),a("p",[e._v("Since most SQL engines or SQL clients can easily dump data as CSV, it will facilitate Meilisearch adoption by extending the indexing step on a wider range of customer cases than before.")]),e._v(" "),a("p",[e._v("Writing performance is also considered as a motivation since CSV parsing is less CPU and memory intensive than parsing Json due to the streamable capability of the CSV format.")]),e._v(" "),a("h3",{attrs:{id:"iii-explanation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iii-explanation"}},[e._v("#")]),e._v(" III.Explanation")]),e._v(" "),a("h4",{attrs:{id:"csv-formatting-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csv-formatting-rules"}},[e._v("#")]),e._v(" CSV Formatting Rules")]),e._v(" "),a("p",[e._v("While there's "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc4180",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC 4180"),a("OutboundLink")],1),e._v(" as a try to add a specification for CSV format, we will find a lot of variations from that. Meilisearch features capabilities requires CSV data to be formatted the proper way to be parsable by the engine.")]),e._v(" "),a("ul",[a("li",[e._v("CSV data format needs to contain a first line representing the list of attributes with the optionally chosen type separated from the attribute name by "),a("code",[e._v(":")]),e._v(" character. The type is case insensitive.")])]),e._v(" "),a("blockquote",[a("p",[e._v("An attribute can be specificed with three types: "),a("code",[e._v("string")]),e._v(", "),a("code",[e._v("boolean")]),e._v(" or "),a("code",[e._v("number")]),e._v(". A missing type will be interpreted as a "),a("code",[e._v("string")]),e._v(" by default.")]),e._v(" "),a("p",[e._v('Valid headline example: "id:number","title:string","author","price:number","cute:boolean"')])]),e._v(" "),a("ul",[a("li",[e._v("The following CSV lines will represent a document for Meilisearch.")]),e._v(" "),a("li",[e._v("A "),a("code",[e._v(",")]),e._v(" character must separate each cell.")]),e._v(" "),a("li",[e._v("A CSV value should be enclosed in double-quotes when it contains the delimiter character or a newline to escape it.")]),e._v(" "),a("li",[e._v("Using double-quotes to enclose fields, then a double-quote appearing inside a field must be escaped by preceding it with another double quote as mentioned in "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc4180",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC 4180"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("Float value should be written with a "),a("code",[e._v(".")]),e._v(" character, like "),a("code",[e._v("3.14")]),e._v(".")]),e._v(" "),a("li",[e._v("CSV text should be encoded in UTF8.")]),e._v(" "),a("li",[e._v("The format can't handle array cell values. We are providing "),a("code",[e._v("nd-json")]),e._v(" format to deal with theses types of attribute in a easier way.")]),e._v(" "),a("li",[e._v("A "),a("code",[e._v("csvDelimiter")]),e._v(" query parameter is available to customize the delimiter used in the documents.\n"),a("ul",[a("li",[e._v("This "),a("code",[e._v("csvDelimiter")]),e._v(" is optional. By default, the "),a("code",[e._v(",")]),e._v(" character is used.")]),e._v(" "),a("li",[e._v("The separator must be one "),a("a",{attrs:{href:"https://www.rfc-editor.org/rfc/rfc20",target:"_blank",rel:"noopener noreferrer"}},[e._v("ascii char"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("The separator can't be used with another Content-Type, or else it'll throw an error.")])])])]),e._v(" "),a("h5",{attrs:{id:"null-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#null-value"}},[e._v("#")]),e._v(" "),a("code",[e._v("null")]),e._v(" value")]),e._v(" "),a("ul",[a("li",[e._v("If a field is of type "),a("code",[e._v("string")]),e._v(", then an empty cell is considered as a "),a("code",[e._v("null")]),e._v(" value (e.g. "),a("code",[e._v(",,")]),e._v("), anything else is turned into a string value (e.g. "),a("code",[e._v(", ,")]),e._v(" is a single whitespace string)")]),e._v(" "),a("li",[e._v("If a field is of type "),a("code",[e._v("number")]),e._v(", when the trimmed field is empty, it's considered as a "),a("code",[e._v("null")]),e._v(" value (e.g. "),a("code",[e._v(",,")]),e._v(" "),a("code",[e._v(", ,")]),e._v("); otherwise, Meilisearch tries to parse the number.")]),e._v(" "),a("li",[e._v("If a field is of type "),a("code",[e._v("boolean")]),e._v(", when the trimmed field is empty, it's considered as a "),a("code",[e._v("null")]),e._v(" value (e.g. "),a("code",[e._v(",,")]),e._v(" "),a("code",[e._v(", ,")]),e._v("); otherwise, Meilisearch tries to parse the boolean as either "),a("code",[e._v("true")]),e._v(" or "),a("code",[e._v("false")]),e._v(".")])]),e._v(" "),a("h5",{attrs:{id:"example-with-a-comma-inside-a-cell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-with-a-comma-inside-a-cell"}},[e._v("#")]),e._v(" Example with a comma inside a cell")]),e._v(" "),a("p",[e._v("Given the CSV payload")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"id:number","label","price:number","colors","description","contains_a_dog_picture:boolean"\n"1","t-shirt","4.99","red","Thus, you will rock at summer time.","false"\n')])])]),a("p",[e._v("the search result should be displayed as")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"hits"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"label"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"t-shirt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"price"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4.99")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"colors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"red"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Thus, you will rock at summer time."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"contains_a_dog_picture"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h5",{attrs:{id:"example-with-a-double-quote-inside-a-cell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-with-a-double-quote-inside-a-cell"}},[e._v("#")]),e._v(" Example with a double quote inside a cell")]),e._v(" "),a("p",[e._v("Given the CSV payload")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"id:number","label","price","colors","description"\n"1","t-shirt","4.99","red","Hey, you will ""rock"" at summer time."\n')])])]),a("p",[e._v("the search result should be displayed as")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"hits"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"label"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"t-shirt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"price"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"4.99"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"colors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"red"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Hey, you will rock at summer time."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("Note that the price attribute was not typed as a number. By default, Meilisearch type it as a string.")])]),e._v(" "),a("h5",{attrs:{id:"example-with-an-empty-cell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-with-an-empty-cell"}},[e._v("#")]),e._v(" Example with an empty cell")]),e._v(" "),a("p",[e._v("Given the CSV payload")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("id:number,label,price:number,colors\n1,t-shirt,,red\n")])])]),a("p",[e._v("the search result should be displayed as")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"hits"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"label"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"t-shirt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"price"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[e._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"colors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"red"')]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h4",{attrs:{id:"api-endpoints"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-endpoints"}},[e._v("#")]),e._v(" API Endpoints")]),e._v(" "),a("blockquote",[a("p",[e._v("Each API endpoints mentioned above will now require a "),a("code",[e._v("text/csv")]),e._v(" as "),a("code",[e._v("Content-Type")]),e._v(" header to be processed as CSV data.")])]),e._v(" "),a("p",[a("strong",[e._v("As a developer, I want to upload a CSV payload of documents so that end-user can search them")])]),e._v(" "),a("p",[a("strong",[e._v("POST documents")]),e._v(" "),a("code",[e._v("/indexes/:indexUid/documents")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -X POST "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://localhost:7700/indexes/movies/documents'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Content-Type: text/csv'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  --data--binary "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'\n    "id","label","price:number","colors","description"\\n\n    "1","hoodie","19.99","purple","Hey, you will rock at summer time."\n  \'')]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("202 Accepted - Response")])]),e._v(" "),a("p",[a("strong",[e._v("PUT documents")]),e._v(" "),a("code",[e._v("/indexes/:indexUid/documents")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -X PUT "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://localhost:7700/indexes/movies/documents'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -H "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Content-Type: text/csv'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  --data-binary "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'\n    "id","label","price:number","colors","description"\\n\n    "1","hoodie","19.99","purple","Hey, you will rock at summer time."\n  \'')]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("202 Accepted - Response")])]),e._v(" "),a("h5",{attrs:{id:"errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errors"}},[e._v("#")]),e._v(" Errors")]),e._v(" "),a("ul",[a("li",[e._v("🔴 Omitted "),a("code",[e._v("Content-Type")]),e._v(" header will lead to a 415 Unsupported Media Type - "),a("strong",[e._v("missing_content_type")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending an empty "),a("code",[e._v("Content-Type")]),e._v(" will lead to a 415 Unsupported Media Type - "),a("strong",[e._v("invalid_content_type")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending a different "),a("code",[e._v("Content-Type")]),e._v(" than "),a("code",[e._v("application/json")]),e._v(", "),a("code",[e._v("application/x-ndjson")]),e._v(" or "),a("code",[e._v("text/csv")]),e._v(" will lead to 415 Unsupported Media Type  "),a("strong",[e._v("invalid_content_type")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending an empty payload will lead to a 400 Bad Request - "),a("strong",[e._v("missing_payload")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending a different payload type than the "),a("code",[e._v("Content-Type")]),e._v(" header should return a 400 Bad Request - "),a("strong",[e._v("malformed_payload")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending a payload excessing the limit will lead to a 413 Payload Too Large - "),a("strong",[e._v("payload_too_large")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending an invalid CSV format will lead to a 400 bad_request - "),a("strong",[e._v("malformed_payload")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending a CSV header that does not conform to the specification will lead to a 400 bad_request - "),a("strong",[e._v("malformed_payload")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending an invalid csv delimiter: not exactly one ASCII char. This will lead to a 400 bad_request - "),a("strong",[e._v("invalid_document_csv_delimiter")]),e._v(" error code.")]),e._v(" "),a("li",[e._v("🔴 Sending a CSV cell with the type "),a("code",[e._v("number")]),e._v(" or "),a("code",[e._v("boolean")]),e._v(" that can't be parsed will lead to a 400 bad_request - "),a("strong",[e._v("malformed_payload")]),e._v(" error code.")])]),e._v(" "),a("h5",{attrs:{id:"errors-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errors-definition"}},[e._v("#")]),e._v(" Errors Definition")]),e._v(" "),a("h2",{attrs:{id:"missing-content-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#missing-content-type"}},[e._v("#")]),e._v(" missing_content_type")]),e._v(" "),a("h3",{attrs:{id:"context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[e._v("#")]),e._v(" Context")]),e._v(" "),a("p",[e._v("This error occurs when the Content-Type header is missing.")]),e._v(" "),a("h3",{attrs:{id:"error-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-definition"}},[e._v("#")]),e._v(" Error Definition")]),e._v(" "),a("p",[e._v("HTTP Code: "),a("code",[e._v("415 Unsupported Media Type")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"A Content-Type header is missing. Accepted values for Content-Type are: :contentTypeList"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"missing_content_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"invalid_request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://docs.meilisearch.com/errors#missing_content_type"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("ul",[a("li",[e._v("The "),a("code",[e._v(":contentTypeList")]),e._v(" is inferred when the message is generated. The values are separated by a "),a("code",[e._v(",")]),e._v(" char. e.g. "),a("code",[e._v("application/json")]),e._v(", "),a("code",[e._v("text/csv")]),e._v(".")])]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"invalid-content-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#invalid-content-type"}},[e._v("#")]),e._v(" invalid_content_type")]),e._v(" "),a("h3",{attrs:{id:"context-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context-2"}},[e._v("#")]),e._v(" Context")]),e._v(" "),a("p",[e._v("This error occurs when the provided content-type is not handled by the API method.")]),e._v(" "),a("h3",{attrs:{id:"error-definition-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-definition-2"}},[e._v("#")]),e._v(" Error Definition")]),e._v(" "),a("p",[e._v("HTTP Code: "),a("code",[e._v("415 Unsupported Media Type")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"The Content-Type :contentType is invalid. Accepted values for Content-Type are: :contentTypeList"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"invalid_content_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"invalid_request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://docs.meilisearch.com/errors#invalid_content_type"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("ul",[a("li",[e._v("The "),a("code",[e._v(":contentTypeList")]),e._v(" is inferred when the message is generated. The values are separated by a "),a("code",[e._v(",")]),e._v(" char. e.g. "),a("code",[e._v("application/json")]),e._v(", "),a("code",[e._v("text/csv")]),e._v(".")])]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"missing-payload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#missing-payload"}},[e._v("#")]),e._v(" missing_payload")]),e._v(" "),a("h3",{attrs:{id:"context-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context-3"}},[e._v("#")]),e._v(" Context")]),e._v(" "),a("p",[e._v("This error occurs when the client does not provide a mandatory payload to the request.")]),e._v(" "),a("h3",{attrs:{id:"error-definition-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-definition-3"}},[e._v("#")]),e._v(" Error Definition")]),e._v(" "),a("p",[e._v("HTTP Code: "),a("code",[e._v("400 Bad Request")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"A :payloadType payload is missing."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"missing_payload"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"invalid_request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://docs.meilisearch.com/errors#missing_payload"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("ul",[a("li",[e._v("The "),a("code",[e._v(":payloadType")]),e._v(" is inferred when the message is generated. e.g. "),a("code",[e._v("json")]),e._v(", "),a("code",[e._v("ndjson")]),e._v(", "),a("code",[e._v("csv")])])]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"malformed-payload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#malformed-payload"}},[e._v("#")]),e._v(" malformed_payload")]),e._v(" "),a("h3",{attrs:{id:"context-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context-4"}},[e._v("#")]),e._v(" Context")]),e._v(" "),a("p",[e._v("This error occurs when the format sent in the payload is malformed. The payload contains a syntax error.")]),e._v(" "),a("h3",{attrs:{id:"error-definition-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-definition-4"}},[e._v("#")]),e._v(" Error Definition")]),e._v(" "),a("p",[e._v("HTTP Code: "),a("code",[e._v("400 Bad Request")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[e._v("    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"The :payloadType payload provided is malformed. :syntaxErrorHelper."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"malformed_payload"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"invalid_request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://docs.meilisearch.com/errors#malformed_payload"')]),e._v("\n")])])]),a("ul",[a("li",[e._v("The "),a("code",[e._v(":payloadType")]),e._v(" is inferred when the message is generated. e.g. "),a("code",[e._v("json")]),e._v(", "),a("code",[e._v("ndjson")]),e._v(", "),a("code",[e._v("csv")])]),e._v(" "),a("li",[e._v("The "),a("code",[e._v(":syntaxErrorHelper")]),e._v(" is inferred when the message is generated.")])]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_2-technical-details"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-technical-details"}},[e._v("#")]),e._v(" 2. Technical details")]),e._v(" "),a("p",[e._v("n/a")]),e._v(" "),a("h2",{attrs:{id:"_3-future-possibilities"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-future-possibilities"}},[e._v("#")]),e._v(" 3. Future possibilities")]),e._v(" "),a("ul",[a("li",[e._v("Provide an interface in the future dashboard to upload CSV data into an index and optionally provide the headers types.")]),e._v(" "),a("li",[e._v("Set a payload limit directly related to the type of data format. Currently, the payload size is equivalent to "),a("a",{attrs:{href:"https://docs.meilisearch.com/reference/features/configuration.html#payload-limit-size",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON payload size"),a("OutboundLink")],1),e._v(". Metrics on feature usage and configuration update should help to choose a better suited value for this type of data format.")])])])}),[],!1,null,null,null);t.default=r.exports}}]);