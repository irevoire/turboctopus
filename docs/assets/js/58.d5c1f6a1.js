(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{482:function(t,e,a){"use strict";a.r(e);var n=a(62),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"configuration-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration-file"}},[t._v("#")]),t._v(" Configuration File")]),t._v(" "),a("h2",{attrs:{id:"_1-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-summary"}},[t._v("#")]),t._v(" 1. Summary")]),t._v(" "),a("p",[t._v("Meilisearch options can be defined in a "),a("code",[t._v(".toml")]),t._v(" configuration file being loaded at launch.")]),t._v(" "),a("h2",{attrs:{id:"_2-motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-motivation"}},[t._v("#")]),t._v(" 2. Motivation")]),t._v(" "),a("p",[t._v("Teams can easily version, track, and share configuration files. It makes it easier to learn about the different options available and to define at a glance how Meilisearch is configured.")]),t._v(" "),a("h2",{attrs:{id:"_3-functional-specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-functional-specification"}},[t._v("#")]),t._v(" 3. Functional Specification")]),t._v(" "),a("h3",{attrs:{id:"_3-1-supported-formats"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-supported-formats"}},[t._v("#")]),t._v(" 3.1. Supported Formats")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Format")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v(".toml")])])])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-priority-order"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-priority-order"}},[t._v("#")]),t._v(" 3.2. Priority Order")]),t._v(" "),a("p",[a("code",[t._v("Configuration file < Env variables < Command-line options")])]),t._v(" "),a("p",[t._v("It means the options in the configuration file are overwritten by the environment variables set (if they exist) and that can be themself overwritten by the command-line options (if they exist).")]),t._v(" "),a("h3",{attrs:{id:"_3-3-default-configuration-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-default-configuration-file"}},[t._v("#")]),t._v(" 3.3. Default Configuration File")]),t._v(" "),a("p",[t._v("By default, Meilisearch will try to read the "),a("code",[t._v("./config.toml")]),t._v(" in the current working directory.")]),t._v(" "),a("p",[t._v("We provide a default configuration file as an example "),a("a",{attrs:{href:"https://github.com/meilisearch/meilisearch/blob/main/config.toml",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"_3-4-config-file-path-meili-config-file-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-config-file-path-meili-config-file-path"}},[t._v("#")]),t._v(" 3.4. "),a("code",[t._v("--config-file-path")]),t._v("/"),a("code",[t._v("MEILI_CONFIG_FILE_PATH")])]),t._v(" "),a("p",[t._v("It is possible to override the default configuration file by setting the "),a("code",[t._v("MEILI_CONFIG_FILE_PATH")]),t._v(" environment variable or by specifying the "),a("code",[t._v("--config-file-path")]),t._v(" option.")]),t._v(" "),a("h3",{attrs:{id:"_3-5-configuration-file-content-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-configuration-file-content-definition"}},[t._v("#")]),t._v(" 3.5. Configuration File Content Definition")]),t._v(" "),a("p",[t._v("The current consistency rule is that all environment variables and launch options are configurable by a dedicated key in the configuration file.")]),t._v(" "),a("p",[t._v("Configuration keys are named following the "),a("code",[t._v("snake_case")]),t._v(" convention from the name of a CLI option. That is, "),a("code",[t._v("--import-dump")]),t._v(" must be named "),a("code",[t._v("import_dump")]),t._v(" within the configuration file.")]),t._v(" "),a("p",[t._v("There is an exception rule. The "),a("code",[t._v("config_file_path")]),t._v(" key is not accepted in the configuration file and stops Meilisearch from being launched if specified.")]),t._v(" "),a("p",[t._v("See "),a("RouterLink",{attrs:{to:"/specifications/text/0119-instance-options.html"}},[t._v("Instance Options")]),t._v(" for more details.")],1),t._v(" "),a("h3",{attrs:{id:"_3-6-indication-of-the-loaded-configuration-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-indication-of-the-loaded-configuration-file"}},[t._v("#")]),t._v(" 3.6. Indication of the loaded configuration file")]),t._v(" "),a("p",[t._v("When Meilisearch is launched, the loaded configuration file is indicated by the "),a("code",[t._v("Config file path")]),t._v(" key on stdout.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("888b     d888          d8b "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" d8b                                            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("\n8888b   d8888          Y8P "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" Y8P                                            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("\n88888b.d88888              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("                                                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("\n888Y88888P888  .d88b.  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" .d8888b   .d88b.   8888b.  888d888 .d8888b 88888b.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" Y888P "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" d8P  Y8b "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" 88K      d8P  Y8b     "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"88b 888P"')]),t._v("  d88P"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    888 "')]),t._v("88b\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("  Y8P  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88888888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Y8888b. 88888888 .d888888 888    888      888  888\n888   "')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" Y8b.     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("      X88 Y8b.     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("    Y88b.    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Y8888  888 888 888  88888P\'  "')]),t._v("Y8888  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Y888888 888     "')]),t._v("Y8888P "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v("\n\nConfig "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" path:       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./config.toml"')]),t._v("\n")])])]),a("p",[t._v("If Meilisearch can't find the default "),a("code",[t._v("config.toml")]),t._v(" or if no other config file is specified with "),a("code",[t._v("MEILI_CONFIG_FILE_PATH")]),t._v(" env var or "),a("code",[t._v("--config-file-path")]),t._v(" options, "),a("code",[t._v("none")]),t._v(" is indicated.")]),t._v(" "),a("h3",{attrs:{id:"_3-7-errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-errors"}},[t._v("#")]),t._v(" 3.7. Errors")]),t._v(" "),a("h4",{attrs:{id:"_3-7-1-defining-config-file-path-in-the-configuration-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-1-defining-config-file-path-in-the-configuration-file"}},[t._v("#")]),t._v(" 3.7.1. Defining "),a("code",[t._v("config_file_path")]),t._v(" in the configuration file")]),t._v(" "),a("p",[t._v("Defining "),a("code",[t._v("config_file_path")]),t._v(" in the configuration file is not valid and Meilisearch returns an error.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Error: "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("config_file_path"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" is not supported "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" configuration file.\n")])])]),a("h4",{attrs:{id:"_3-7-2-defining-a-non-existent-config-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-2-defining-a-non-existent-config-file"}},[t._v("#")]),t._v(" 3.7.2. Defining a non-existent config file.")]),t._v(" "),a("p",[t._v("Defining a configuration file other than the default file that does not exist returns an error when launching Meilisearch.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Error: unable to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" the "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"XXX"')]),t._v(" configuration file: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" or directory "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n")])])]),a("h4",{attrs:{id:"_3-7-3-defining-a-config-file-with-a-syntax-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-3-defining-a-config-file-with-a-syntax-error"}},[t._v("#")]),t._v(" 3.7.3. Defining a config file with a syntax error.")]),t._v(" "),a("p",[t._v("Defining a configuration file wrongly formatted or containing an invalid configuration key returns an error when launching Meilisearch.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Error: unknown field "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("XXX"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" at line Y "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" Z\n")])])]),a("h2",{attrs:{id:"_4-technical-details"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-technical-details"}},[t._v("#")]),t._v(" 4. Technical Details")]),t._v(" "),a("p",[t._v("N/A")]),t._v(" "),a("h2",{attrs:{id:"_5-future-possibilities"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-future-possibilities"}},[t._v("#")]),t._v(" 5. Future Possibilities")]),t._v(" "),a("ul",[a("li",[t._v("Better indicate a syntax error")]),t._v(" "),a("li",[t._v("List all loaded configuration at launch on the stdout")]),t._v(" "),a("li",[t._v("Introduce toml sections to group options under a common name. e.g. A dump section could contain a "),a("code",[t._v("schedule")]),t._v(", "),a("code",[t._v("dir")]),t._v(", "),a("code",[t._v("interval-sec")]),t._v(" and "),a("code",[t._v("enable")]),t._v(". That could help navigate the toml.")]),t._v(" "),a("li",[t._v("Introduce other formats")])])])}),[],!1,null,null,null);e.default=s.exports}}]);