<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API Keys | Welcome to the Meilisearch specifications!</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.b26ff90a.css" as="style"><link rel="preload" href="/assets/js/app.2f2009b5.js" as="script"><link rel="preload" href="/assets/js/3.4da56047.js" as="script"><link rel="preload" href="/assets/js/29.67490c23.js" as="script"><link rel="prefetch" href="/assets/js/10.4bb9eeac.js"><link rel="prefetch" href="/assets/js/11.16951e4b.js"><link rel="prefetch" href="/assets/js/12.31781feb.js"><link rel="prefetch" href="/assets/js/13.167021d3.js"><link rel="prefetch" href="/assets/js/14.9305fa09.js"><link rel="prefetch" href="/assets/js/15.095125b3.js"><link rel="prefetch" href="/assets/js/16.166f3cec.js"><link rel="prefetch" href="/assets/js/17.052e3dd6.js"><link rel="prefetch" href="/assets/js/18.145cf324.js"><link rel="prefetch" href="/assets/js/19.9e814d58.js"><link rel="prefetch" href="/assets/js/20.9f9509a9.js"><link rel="prefetch" href="/assets/js/21.01b56736.js"><link rel="prefetch" href="/assets/js/22.a9f2f84c.js"><link rel="prefetch" href="/assets/js/23.582f3200.js"><link rel="prefetch" href="/assets/js/24.2234005f.js"><link rel="prefetch" href="/assets/js/25.759f5cae.js"><link rel="prefetch" href="/assets/js/26.a92885cc.js"><link rel="prefetch" href="/assets/js/27.5e7527f3.js"><link rel="prefetch" href="/assets/js/28.d2c2cee7.js"><link rel="prefetch" href="/assets/js/30.128855ad.js"><link rel="prefetch" href="/assets/js/31.eed11757.js"><link rel="prefetch" href="/assets/js/32.88319e61.js"><link rel="prefetch" href="/assets/js/33.ec930b23.js"><link rel="prefetch" href="/assets/js/34.b5b8f566.js"><link rel="prefetch" href="/assets/js/35.d398443f.js"><link rel="prefetch" href="/assets/js/36.f6a0e508.js"><link rel="prefetch" href="/assets/js/37.1d009b1c.js"><link rel="prefetch" href="/assets/js/38.bfdf6fc9.js"><link rel="prefetch" href="/assets/js/39.3ffdfa45.js"><link rel="prefetch" href="/assets/js/4.aaee11b0.js"><link rel="prefetch" href="/assets/js/40.abe06e6a.js"><link rel="prefetch" href="/assets/js/41.65027914.js"><link rel="prefetch" href="/assets/js/42.abb4f81a.js"><link rel="prefetch" href="/assets/js/43.88825786.js"><link rel="prefetch" href="/assets/js/44.437489b6.js"><link rel="prefetch" href="/assets/js/45.94f10b5f.js"><link rel="prefetch" href="/assets/js/46.28bc0390.js"><link rel="prefetch" href="/assets/js/47.bf881f32.js"><link rel="prefetch" href="/assets/js/48.ccf7ab5d.js"><link rel="prefetch" href="/assets/js/49.61a203fe.js"><link rel="prefetch" href="/assets/js/5.06848b4d.js"><link rel="prefetch" href="/assets/js/50.5561182d.js"><link rel="prefetch" href="/assets/js/51.320631dd.js"><link rel="prefetch" href="/assets/js/52.c36008c5.js"><link rel="prefetch" href="/assets/js/53.f57a89e9.js"><link rel="prefetch" href="/assets/js/54.70550584.js"><link rel="prefetch" href="/assets/js/55.621009c6.js"><link rel="prefetch" href="/assets/js/56.f8afd4eb.js"><link rel="prefetch" href="/assets/js/57.8d52478a.js"><link rel="prefetch" href="/assets/js/58.d5c1f6a1.js"><link rel="prefetch" href="/assets/js/59.a3757b9e.js"><link rel="prefetch" href="/assets/js/6.87f02c74.js"><link rel="prefetch" href="/assets/js/60.df174b2b.js"><link rel="prefetch" href="/assets/js/61.9cdf5562.js"><link rel="prefetch" href="/assets/js/62.371c5b80.js"><link rel="prefetch" href="/assets/js/63.d21ecbad.js"><link rel="prefetch" href="/assets/js/64.35b62905.js"><link rel="prefetch" href="/assets/js/65.509d9e2e.js"><link rel="prefetch" href="/assets/js/66.0c66d056.js"><link rel="prefetch" href="/assets/js/67.0aad035d.js"><link rel="prefetch" href="/assets/js/68.b22329c3.js"><link rel="prefetch" href="/assets/js/7.fadbe260.js"><link rel="prefetch" href="/assets/js/8.e63f62a9.js"><link rel="prefetch" href="/assets/js/9.0c014273.js"><link rel="prefetch" href="/assets/js/vendors~docs-searchbar.9a2822a3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b26ff90a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Welcome to the Meilisearch specifications!</span></a> <div class="links"><form id="search-form" role="search" class="meilisearch-search-wrapper search-box"><input id="meilisearch-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/specifications/text/specifications/text/0000-specification-template.html" class="nav-link">
  Specification
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/specifications/text/specifications/text/0000-specification-template.html" class="nav-link">
  Specification
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/specifications/text/0000-specification-template.html" class="sidebar-link">Specification template</a></li><li><a href="/specifications/text/0001-frontend-disable-prod.html" class="sidebar-link">Frontend disable prod</a></li><li><a href="/specifications/text/0001-script-based-tokenizer.html" class="sidebar-link">Script based tokenizer</a></li><li><a href="/specifications/text/0028-indexing-csv.html" class="sidebar-link">Indexing csv</a></li><li><a href="/specifications/text/0029-indexing-ndjson.html" class="sidebar-link">Indexing ndjson</a></li><li><a href="/specifications/text/0032-distinct-attribute.html" class="sidebar-link">Distinct attribute</a></li><li><a href="/specifications/text/0033-logging.html" class="sidebar-link">Logging</a></li><li><a href="/specifications/text/0034-telemetry-policies.html" class="sidebar-link">Telemetry policies</a></li><li><a href="/specifications/text/0038-rename-attributes-for-faceting.html" class="sidebar-link">Rename attributes for faceting</a></li><li><a href="/specifications/text/0043-phrase-query.html" class="sidebar-link">Phrase query</a></li><li><a href="/specifications/text/0047-reset-stop-words-synonyms-settings-with-null.html" class="sidebar-link">Reset stop words synonyms settings with null</a></li><li><a href="/specifications/text/0048-rename-max-mdb-size-var.html" class="sidebar-link">Rename max mdb size var</a></li><li><a href="/specifications/text/0055-sort.html" class="sidebar-link">Sort</a></li><li><a href="/specifications/text/0059-geo-search.html" class="sidebar-link">Geo search</a></li><li><a href="/specifications/text/0060-tasks-api.html" class="sidebar-link">Tasks api</a></li><li><a href="/specifications/text/0061-error-format-and-definitions.html" class="sidebar-link">Error format and definitions</a></li><li><a href="/specifications/text/0077-words-position-limit.html" class="sidebar-link">Words position limit</a></li><li><a href="/specifications/text/0085-api-keys.html" aria-current="page" class="active sidebar-link">Api keys</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/specifications/text/0085-api-keys.html#_1-summary" class="sidebar-link">1. Summary</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0085-api-keys.html#_2-motivation" class="sidebar-link">2. Motivation</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0085-api-keys.html#_3-functional-specification" class="sidebar-link">3. Functional Specification</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0085-api-keys.html#_4-technical-aspects" class="sidebar-link">4. Technical Aspects</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0085-api-keys.html#_5-future-possibilities" class="sidebar-link">5. Future Possibilities</a></li></ul></li><li><a href="/specifications/text/0089-tenant-tokens.html" class="sidebar-link">Tenant tokens</a></li><li><a href="/specifications/text/0096-auto-batching.html" class="sidebar-link">Auto batching</a></li><li><a href="/specifications/text/0105-dumps-api.html" class="sidebar-link">Dumps api</a></li><li><a href="/specifications/text/0117-typo-tolerance-setting-api.html" class="sidebar-link">Typo tolerance setting api</a></li><li><a href="/specifications/text/0118-search-api.html" class="sidebar-link">Search api</a></li><li><a href="/specifications/text/0119-instance-options.html" class="sidebar-link">Instance options</a></li><li><a href="/specifications/text/0121-data-types.html" class="sidebar-link">Data types</a></li><li><a href="/specifications/text/0123-displayed-attributes-setting-api.html" class="sidebar-link">Displayed attributes setting api</a></li><li><a href="/specifications/text/0123-distinct-attribute-setting-api.html" class="sidebar-link">Distinct attribute setting api</a></li><li><a href="/specifications/text/0123-filterable-attributes-setting-api.html" class="sidebar-link">Filterable attributes setting api</a></li><li><a href="/specifications/text/0123-proximity-precision.html" class="sidebar-link">Proximity precision</a></li><li><a href="/specifications/text/0123-ranking-rules-setting-api.html" class="sidebar-link">Ranking rules setting api</a></li><li><a href="/specifications/text/0123-searchable-attributes-setting-api.html" class="sidebar-link">Searchable attributes setting api</a></li><li><a href="/specifications/text/0123-separators-settings-api.html" class="sidebar-link">Separators settings api</a></li><li><a href="/specifications/text/0123-settings-api.html" class="sidebar-link">Settings api</a></li><li><a href="/specifications/text/0123-sortable-attributes-setting-api.html" class="sidebar-link">Sortable attributes setting api</a></li><li><a href="/specifications/text/0123-stop-words-setting-api.html" class="sidebar-link">Stop words setting api</a></li><li><a href="/specifications/text/0123-synonyms-setting-api.html" class="sidebar-link">Synonyms setting api</a></li><li><a href="/specifications/text/0123-user-dictionary-settings-api.html" class="sidebar-link">User dictionary settings api</a></li><li><a href="/specifications/text/0124-documents-api.html" class="sidebar-link">Documents api</a></li><li><a href="/specifications/text/0132-indexes-api.html" class="sidebar-link">Indexes api</a></li><li><a href="/specifications/text/0134-stats-api.html" class="sidebar-link">Stats api</a></li><li><a href="/specifications/text/0135-indexing-json.html" class="sidebar-link">Indexing json</a></li><li><a href="/specifications/text/0136-documents-soft-deletion.html" class="sidebar-link">Documents soft deletion</a></li><li><a href="/specifications/text/0171-version-api.html" class="sidebar-link">Version api</a></li><li><a href="/specifications/text/0172-health-api.html" class="sidebar-link">Health api</a></li><li><a href="/specifications/text/0174-metrics-api.html" class="sidebar-link">Metrics api</a></li><li><a href="/specifications/text/0178-compression-headers.html" class="sidebar-link">Compression headers</a></li><li><a href="/specifications/text/0185-configuration-file.html" class="sidebar-link">Configuration file</a></li><li><a href="/specifications/text/0191-swap-indexes-api.html" class="sidebar-link">Swap indexes api</a></li><li><a href="/specifications/text/0192-multi-search-api.html" class="sidebar-link">Multi search api</a></li><li><a href="/specifications/text/0193-experimental-features.html" class="sidebar-link">Experimental features</a></li><li><a href="/specifications/text/0194-experimental-feature-api.html" class="sidebar-link">Experimental feature api</a></li><li><a href="/specifications/text/0195-ranking-score.html" class="sidebar-link">Ranking score</a></li><li><a href="/specifications/text/0246-facet-search-api.html" class="sidebar-link">Facet search api</a></li><li><a href="/specifications/text/0258-snapshots-api.html" class="sidebar-link">Snapshots api</a></li><li><a href="/specifications/text/0262-task-queue-webhook.html" class="sidebar-link">Task queue webhook</a></li><li><a href="/specifications/text/157-faceting-setting-api.html" class="sidebar-link">Aceting setting api</a></li><li><a href="/specifications/text/157-pagination-setting-api.html" class="sidebar-link">Agination setting api</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-keys"><a href="#api-keys" class="header-anchor">#</a> API Keys</h1> <h2 id="_1-summary"><a href="#_1-summary" class="header-anchor">#</a> 1. Summary</h2> <p>API keys allows to define which actions and which indexes are accessible by the holder of an API key. The use of API keys allows to secure the access to the routes in a fine-grained manner of a Meilisearch instance.</p> <h2 id="_2-motivation"><a href="#_2-motivation" class="header-anchor">#</a> 2. Motivation</h2> <p>To make Meilisearch more reliable for teams and more adapted to production cases, we extend the management and the possibilities of restrictions regarding write and read requests on a Meilisearch instance by introducing a way to manage custom API keys.</p> <h2 id="_3-functional-specification"><a href="#_3-functional-specification" class="header-anchor">#</a> 3. Functional Specification</h2> <h3 id="_3-1-glossary"><a href="#_3-1-glossary" class="header-anchor">#</a> 3.1. Glossary</h3> <table><thead><tr><th>Term</th> <th>Definition</th></tr></thead> <tbody><tr><td>Master Key</td> <td>This is the master key that allows managing API keys. The master key is defined by the user when launching Meilisearch, thus gives access to the <code>/keys</code> API endpoint and requiring requests to be authorized.</td></tr> <tr><td>API Key</td> <td>API keys are stored and managed from the endpoint <code>/keys</code> by the master key holder.</td></tr></tbody></table> <h3 id="_3-2-explanation"><a href="#_3-2-explanation" class="header-anchor">#</a> 3.2. Explanation</h3> <h4 id="_3-2-1-summary-key-points"><a href="#_3-2-1-summary-key-points" class="header-anchor">#</a> 3.2.1 Summary Key Points</h4> <ul><li>API keys management is restricted to the master key or API keys having <code>keys.get</code>, <code>keys.create</code>, <code>keys.update</code>, <code>keys.delete</code> or <code>*</code> actions.</li> <li>API keys must be provided via the <code>Authorization</code> header using the bearer method to authorize a request.</li> <li>The value of the <code>key</code> field of an API Key is generated from its <code>uid</code> and the master key.</li> <li>When a master key is set at Meilisearch first-launch, it generate two pre-configured default <code>API Key</code> resources. A <code>Default Search API Key</code> authorizing the search action on all indexes and a <code>Default Admin API Key</code> authorizing all actions.</li> <li>If the master-key changes, the <code>key</code> field is re-generated.</li> <li>Default API keys can be modified/deleted from the <code>/keys</code> endpoints but are not re-created if Meilisearch has already created them.</li> <li>API keys can have restrictions on which methods can be accessed via an <code>actions</code> list; they also <code>expiresAt</code> a specific date time and are restricted to a specific set of <code>indexes</code>.</li> <li><code>name</code> and <code>description</code> fields are the only editable fields of an API key.</li> <li>API key resources are propagated to snapshots and dumps.</li></ul> <h4 id="_3-2-2-master-key"><a href="#_3-2-2-master-key" class="header-anchor">#</a> 3.2.2. Master Key</h4> <p>The master key exists to secure a Meilisearch instance. As soon as a master key is set via the  <code>MEILI_MASTER_KEY</code> environment variable or the <code>--master-key</code> CLI option, the endpoint <code>/keys</code> is accessible for the master key holder. It can be seen as a super admin key; It must be securely shared only with people who have to manage the security of a Meilisearch instance.</p> <p>This master key is not an API key, thus is not stored and fetchable from the <code>/keys</code> API endpoint. It must be seen as a runtime lock that activates the security of Meilisearch as soon as an instance is launched with it. The master key should only be used to fetch API Keys the first time. The default Admin API key should be preferred to manage the API keys resources.</p> <p>At the first launch of Meilisearch with a master key, Meilisearch automatically generates two default API keys to cover the basic needs a user may encounter. It generates a <code>Default Search API Key</code> dedicated to the search that can be used on the client-side and a <code>Default Admin API Key</code> to manipulate a MeiliSearch instance from a backend side.</p> <p>If the master key is removed at Meilisearch launch, the previously generated API keys no longer secure the Meilisearch instance.</p> <p>If Meilisearch is launched with the <code>production</code> value for the <code>MEILI_ENV</code> environment variable or the <code>--env</code> CLI option, a master key of at least 16 bytes is mandatory.</p> <p>If the master key is omitted in that particular case, or is too short, Meilisearch launch is aborted and displays an error.</p> <p>If Meilisearch is launched with the <code>development</code> value for the <code>MEILI_ENV</code> environment variable or the <code>--env</code> CLI option, Meilisearch displays warning messages given different cases.</p> <p>See <a href="0119-instance-options#334-master-key"><code>MEILI_MASTER_KEY</code>/<code>--master-key</code> launch option</a>.</p> <p>The master key must be composed of valid utf-8 characters. It is advisable to enclose it in <code>'</code> when specified via the <code>--master-key</code> option.</p> <blockquote><p>🚨 The master key should never be exposed to the public as it may compromise a Meilisearch instance.</p></blockquote> <blockquote><p>🚨 If the value of the master key changes, all the previously generated <code>API Keys</code> changes, thus allowing to invalidate the set of API keys previously generated by regenerating a different value for their <code>key</code> field. This is particularly useful in the case where the master key might have been leaked and the user needs to re-generate the whole set of keys at once to re-secure the instance.</p></blockquote> <blockquote><p>The master key does not appear on the <code>/keys</code> endpoints and can't be used to authorize requests other than on the <code>/keys</code> endpoint.</p></blockquote> <blockquote><p>The only route not secured in the presence of a master key is the <code>/health</code> route.</p></blockquote> <h4 id="_3-2-3-default-api-keys"><a href="#_3-2-3-default-api-keys" class="header-anchor">#</a> 3.2.3. Default API Keys</h4> <p>The first time a Meilisearch instance is launched with a <code>master key</code>, Meilisearch will generate two API keys described below.</p> <p>If the user changes the value of the master key later, these two default keys are not created again but the <code>key</code> field is re-generated. However, these two API keys can be updated/deleted using the <code>/keys</code> endpoints.</p> <p>If these API keys are deleted, the engine should not create them again when Meilisearch is launched again with a master key.</p> <h5 id="_3-2-3-1-default-search-api-key"><a href="#_3-2-3-1-default-search-api-key" class="header-anchor">#</a> 3.2.3.1. Default Search API Key</h5> <p>The <code>Default Search API key</code> gives access to the search endpoints on all indexes.</p> <p>Here is how the <code>Default Search API Key</code> is represented after its generation.</p> <div class="language-jsonc extra-class"><pre class="language-text"><code>{
    &quot;uid&quot;: &quot;01b4bc42-eb33-4041-b481-254d00cce834&quot;, //auto-generated value
    &quot;key&quot;: &quot;0a6e572506c52ab0bd6195921575d23092b7f0c284ab4ac86d12346c33057f99&quot;, //auto-generated value
    &quot;name&quot;: &quot;Default Search API Key&quot;,
    &quot;description&quot;: &quot;Use it to search from the frontend&quot;,
    &quot;actions&quot;: [
        &quot;search&quot;
    ],
    &quot;indexes&quot;: [
        &quot;*&quot;
    ],
    &quot;expiresAt&quot;: null,
    &quot;createdAt&quot;: &quot;2021-08-11T10:00:00Z&quot;,
    &quot;updatedAt&quot;: &quot;2021-08-11T10:00:00Z&quot;
}
</code></pre></div><h5 id="_3-2-3-2-default-admin-api-key"><a href="#_3-2-3-2-default-admin-api-key" class="header-anchor">#</a> 3.2.3.2. Default Admin API Key</h5> <p>The <code>Default Admin API key</code> gives access to all actions by default.</p> <p>Here is how the <code>Default Admin API Key</code> is represented after its generation.</p> <div class="language-jsonc extra-class"><pre class="language-text"><code>{
    &quot;uid&quot;: &quot;ac06a7e1-6956-4699-bb04-dbeb72a231df&quot;, //auto-generated value
    &quot;key&quot;: &quot;380689dd379232519a54d15935750cc7625620a2ea2fc06907cb40ba5b421b6f&quot;, //auto-generated value
    &quot;name&quot;: &quot;Default Admin API Key&quot;,
    &quot;description&quot;: &quot;Use it for anything that is not a search operation. Caution! Do not expose it on a public frontend&quot;,
    &quot;actions&quot;: [
        &quot;*&quot;
    ],
    &quot;indexes&quot;: [
        &quot;*&quot;
    ],
    &quot;expiresAt&quot;: null,
    &quot;createdAt&quot;: &quot;2021-08-11T10:00:00Z&quot;,
    &quot;updatedAt&quot;: &quot;2021-08-11T10:00:00Z&quot;
}
</code></pre></div><h4 id="_3-2-4-api-endpoints-definition"><a href="#_3-2-4-api-endpoints-definition" class="header-anchor">#</a> 3.2.4. API Endpoints Definition</h4> <p>Manipulate API keys of a Meilisearch instance. <code>/keys</code> endpoints are <strong>only accessible by the master key holder.</strong></p> <h5 id="_3-2-4-1-api-key-resource-representation"><a href="#_3-2-4-1-api-key-resource-representation" class="header-anchor">#</a> 3.2.4.1. <code>API Key</code> Resource Representation</h5> <table><thead><tr><th>field</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>uid</td> <td>string</td> <td>A unique identifier represented by a uuid v4. Can be specified at creation or generated by Meilisearch if ommited.</td></tr> <tr><td>key</td> <td>string</td> <td>The generated key to use when in the Authorization header when making requests. <strong>Generated by MeiliSearch by a combination of uid and the master key</strong>.</td></tr> <tr><td>name</td> <td>string</td> <td>A non unique human readable name to ease identification of the API key. <code>null</code> if empty.</td></tr> <tr><td>description</td> <td>string</td> <td>A description for the key. <code>null</code> if empty.</td></tr> <tr><td>actions</td> <td>array</td> <td>A list of actions permitted for the key. <code>[&quot;*&quot;]</code> for all actions. See Actions List Definition part.</td></tr> <tr><td>indexes</td> <td>array</td> <td>A list of indexes permitted for the key. <code>[&quot;*&quot;]</code> for all indexes.</td></tr> <tr><td>expiresAt</td> <td>string</td> <td>Represent the expiration date and time as <code>RFC 3339</code> format. <code>null</code> equals to no expiration time.</td></tr> <tr><td>createdAt</td> <td>string</td> <td>Represent the date and time as <code>RFC 3339</code> format when the API key has been created. <strong>Generated by MeiliSearch</strong></td></tr> <tr><td>updatedAt</td> <td>string</td> <td>Represent the date and time as <code>RFC 3339</code> format when the API key has been updated. <strong>Default</strong>: Value of <code>createdAt</code>. <strong>Generated by MeiliSearch</strong></td></tr></tbody></table> <h5 id="_3-2-4-2-get-keys"><a href="#_3-2-4-2-get-keys" class="header-anchor">#</a> 3.2.4.2. <code>GET</code> - <code>/keys</code></h5> <p>Fetch the API keys of a Meilisearch instance.</p> <h6 id="_3-2-4-2-1-query-parameter-definition"><a href="#_3-2-4-2-1-query-parameter-definition" class="header-anchor">#</a> 3.2.4.2.1. Query Parameter Definition</h6> <table><thead><tr><th>Field</th> <th>Type</th> <th>Required</th></tr></thead> <tbody><tr><td><code>offset</code></td> <td>Integer / <code>null</code></td> <td>false</td></tr> <tr><td><code>limit</code></td> <td>Integer / <code>null</code></td> <td>false</td></tr></tbody></table> <h6 id="offset"><a href="#offset" class="header-anchor">#</a> <code>offset</code></h6> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>0</code></li></ul> <p>Sets the starting point in the results, effectively skipping over a given number of API keys.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>offset</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_offset">invalid_api_key_offset</a> error.</li></ul> <h6 id="limit"><a href="#limit" class="header-anchor">#</a> <code>limit</code></h6> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>20</code></li></ul> <p>Sets the maximum number of documents to be returned by the current request.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>limit</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_limit">invalid_api_key_limit</a> error.</li></ul> <h6 id="_3-2-4-2-2-response-definition"><a href="#_3-2-4-2-2-response-definition" class="header-anchor">#</a> 3.2.4.2.2. Response Definition</h6> <p>Returns a <code>200 Success</code> HTTP code when the request is successful.</p> <table><thead><tr><th>Field</th> <th>Type</th> <th>Required</th></tr></thead> <tbody><tr><td><code>results</code></td> <td>Array of <a href="#3241-api-key-resource-representation">APIKey</a></td> <td>true</td></tr> <tr><td><code>offset</code></td> <td>Integer</td> <td>true</td></tr> <tr><td><code>limit</code></td> <td>Integer</td> <td>true</td></tr> <tr><td><code>total</code></td> <td>Integer</td> <td>true</td></tr></tbody></table> <h6 id="results"><a href="#results" class="header-anchor">#</a> <code>results</code></h6> <ul><li>Type: Array[APIKey]</li> <li>Required: True</li></ul> <p>An array containing the fetched API keys.</p> <h6 id="offset-2"><a href="#offset-2" class="header-anchor">#</a> <code>offset</code></h6> <ul><li>Type: Integer</li> <li>Required: True</li></ul> <p>Gives the <code>offset</code> parameter used for the query.</p> <h6 id="limit-2"><a href="#limit-2" class="header-anchor">#</a> <code>limit</code></h6> <ul><li>Type: Integer</li> <li>Required: True</li></ul> <p>Gives the <code>limit</code> parameter used for the query.</p> <h6 id="total"><a href="#total" class="header-anchor">#</a> <code>total</code></h6> <ul><li>Type: Integer</li> <li>Required: True</li></ul> <p>Gives the total number of API keys that can be browsed.</p> <blockquote><p>API Keys are ordered by <code>createdAt</code> in <code>desc</code> order. (Most recent first)</p></blockquote> <blockquote><p>Expired API keys can be found on the <code>/keys</code> endpoints. An archiving system or a filter could allow to not display them by default. See Future Possibilities part.</p></blockquote> <h6 id="_3-2-4-2-3-errors"><a href="#_3-2-4-2-3-errors" class="header-anchor">#</a> 3.2.4.2.3. Errors</h6> <ul><li>🔴 Accessing this route while a master key is not set for the instance returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_master_key">missing_master_key</a> error.</li> <li>🔴 Accessing this route without the <code>Authorization</code> header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header">missing_authorization_header</a> error.</li> <li>🔴 Accessing this route without the master key returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li></ul> <h6 id="_3-2-4-2-4-example"><a href="#_3-2-4-2-4-example" class="header-anchor">#</a> 3.2.4.2.4. Example</h6> <p><code>200 Success</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;results&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Manage Products/Reviews Documents API key&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ac06a7e1-6956-4699-bb04-dbeb72a231df&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2fcdddd16ab75a4aeea6b74577874bc2888938a69ffafe3d05547560fa72e15b&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;documents.add&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;documents.delete&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;indexes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;products&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;reviews&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;expiresAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-12-31T23:59:59Z&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-10-12T00:00:00Z&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-10-13T15:00:00Z&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Default Search API Key (Use it to search from the frontend code)&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;87861fb0-e948-41da-ae7f-89617d57d5f5&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0fe6fc6d94a21b5ca0b5a714bcb338865108039efc048e99e5ba2e7a976fa330&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;search&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;indexes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;*&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;expiresAt&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-08-11T10:00:00Z&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-08-11T10:00:00Z&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Default Admin API Key (Use it for all other operations. Caution! Do not share it on the client side)&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ad9af94e-d2db-420f-9ee3-9375f091e565&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1846b591d7fd0454bc2b7f1c7ad80c411b1cfe46a51b0d44e6554a30f4bc0a18&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;*&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;indexes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;*&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;expiresAt&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-08-11T10:00:00Z&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-08-11T10:00:00Z&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>👉 Note the two default generated API keys here. When a master key is set at MeiliSearch's launch, it generates two pre-configured <code>API Keys</code>. A Default Search API Key restricted to the search action on all indexes and a Default Admin API Key on all indexes to handle all operations (except managing API Keys).</p></blockquote> <h5 id="_3-2-4-3-get-keys-uid-or-key"><a href="#_3-2-4-3-get-keys-uid-or-key" class="header-anchor">#</a> 3.2.4.3. <code>GET</code> - <code>/keys/:uid_or_key</code></h5> <p>Fetch a specific API key of a Meilisearch instance from it's <code>uid</code> or <code>key</code> field.</p> <h6 id="_3-2-4-3-1-query-parameter-definition"><a href="#_3-2-4-3-1-query-parameter-definition" class="header-anchor">#</a> 3.2.4.3.1. Query Parameter Definition</h6> <p>n/a</p> <h6 id="_3-2-4-3-2-response-definition"><a href="#_3-2-4-3-2-response-definition" class="header-anchor">#</a> 3.2.4.3.2. Response Definition</h6> <p>Returns a <code>200 Success</code> HTTP code when the request is successful.</p> <p>See <a href="#3241-api-key-resource-representation">API Key Resource Representation</a> section for the response body.</p> <h6 id="_3-2-4-3-3-errors"><a href="#_3-2-4-3-3-errors" class="header-anchor">#</a> 3.2.4.3.3. Errors</h6> <ul><li>🔴 Accessing this route while a master key is not set for the instance returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_master_key">missing_master_key</a> error.</li> <li>🔴 Accessing this route without the <code>Authorization</code> header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header">missing_authorization_header</a> error.</li> <li>🔴 Accessing this route without the master key or an API key missing the <code>keys.get</code> permission returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li></ul> <h5 id="_3-2-4-4-post-keys"><a href="#_3-2-4-4-post-keys" class="header-anchor">#</a> 3.2.4.4. <code>POST</code> - <code>/keys</code></h5> <p>Create an API key.</p> <h6 id="_3-2-4-4-1-payload-definition"><a href="#_3-2-4-4-1-payload-definition" class="header-anchor">#</a> 3.2.4.4.1. Payload Definition</h6> <table><thead><tr><th>field</th> <th>type</th> <th>required</th> <th>description</th></tr></thead> <tbody><tr><td>uid</td> <td>string</td> <td>Optional</td> <td>A unique identifier represented by a <a href="https://fr.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" rel="noopener noreferrer">uuid v4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Specified at creation or generated by Meilisearch if ommited.</td></tr> <tr><td>name</td> <td>string</td> <td>Optional</td> <td>A non unique human readable name to ease identification of the API key. <strong>Default</strong>: <code>null</code></td></tr> <tr><td>description</td> <td>string</td> <td>Optional</td> <td>A description for the API key. <strong>Default</strong>: <code>null</code></td></tr> <tr><td>actions</td> <td>array</td> <td>Required</td> <td>A list of actions permitted for the API key. <code>[&quot;*&quot;]</code> for all actions. <strong>See Actions list definition part</strong>. The <code>*</code> character can be used as a wildcard when located at the last position. e.g. <code>documents.*</code> to authorize access on all documents endpoints. <strong>Default</strong>: <code>No default</code></td></tr> <tr><td>indexes</td> <td>array</td> <td>Required</td> <td><code>[*]</code> for all indexes. The <code>*</code> character can be used as a wildcard when located in the last position. e.g. <code>products_*</code> to allow access to all indexes whose names start with <code>products_</code>. <strong>Default</strong>: <code>No Default</code></td></tr> <tr><td>expiresAt</td> <td>string</td> <td>Required</td> <td>The expiration date and time as <code>RFC 3339</code> format. <code>null</code> equals to no expiration time. Sending only the date part e.g <code>2021-12-01</code> leads to having an <code>expiresAt</code> value set to <code>2021-12-01T00:00:00</code>. <strong>Default</strong>: <code>No Default</code></td></tr></tbody></table> <h6 id="_3-2-4-4-2-actions-list-definition"><a href="#_3-2-4-4-2-actions-list-definition" class="header-anchor">#</a> 3.2.4.4.2. <code>actions</code> List Definition</h6> <blockquote><p><code>:authorizedIndexes</code> can be any value extracted from the <code>indexes</code> field of an API key resource.</p></blockquote> <table><thead><tr><th>name</th> <th>description</th></tr></thead> <tbody><tr><td>search</td> <td>Provides access to <code>GET</code> and <code>POST</code> methods on <code>/indexes/:authorizedIndexes/search</code> routes.</td></tr> <tr><td>documents.add</td> <td>Provides access to <code>POST</code> and <code>PUT</code> on <code>/indexes/:authorizedIndexes/documents</code> routes.</td></tr> <tr><td>documents.get</td> <td>Provides access to <code>GET</code> methods on <code>/indexes/:authorizedIndexes/documents</code>, <code>/indexes/:authorizedIndexes/documents/:documentId</code> and <code>POST</code> methods on <code>/indexes/:authorizedIndexes/documents/fetch</code> routes.</td></tr> <tr><td>documents.delete</td> <td>Provides access to <code>DELETE</code> method on <code>/indexes/:authorizedIndexes/documents/:documentId</code>, <code>indexes/:authorizedIndexes/documents/:documentId</code> and <code>POST</code> method on <code>/indexes/:authorizedIndexes/documents/delete-batch</code> and <code>/indexes/:authorizedIndexes/documents/delete</code> routes.</td></tr> <tr><td>indexes.create</td> <td>Provides access to <code>POST</code> <code>/indexes</code>. <strong>⚠️ <code>indexes</code> field should indicate the newly created index or having <code>[*]</code> to permits access on it.</strong>.</td></tr> <tr><td>indexes.get</td> <td>Provides access to <code>GET</code> <code>/indexes</code> and <code>/indexes/:authorizedIndexes</code>. <strong>⚠️Non-authorized <code>indexes</code> are omitted from the response on <code>/indexes</code></strong>.</td></tr> <tr><td>indexes.update</td> <td>Provides access to <code>PUT</code> <code>/indexes/:authorizedIndexes</code>.</td></tr> <tr><td>indexes.delete</td> <td>Provides access to <code>DELETE</code> <code>/indexes/:authorizedIndexes</code>.</td></tr> <tr><td>indexes.swap</td> <td>Provides access to <code>POST</code> <code>/swap-indexes</code>. See <a href="/specifications/text/0191-swap-indexes-api.html">Swap Indexes API</a> specification.</td></tr> <tr><td>tasks.get</td> <td>Provides access to <code>GET</code> <code>/tasks</code>. <strong>⚠️Non-authorized <code>indexes</code> are omitted from the response on <code>/tasks</code></strong>. Also add access to <code>GET</code> <code>/indexes/:authorizedIndexes/tasks</code> routes.</td></tr> <tr><td>tasks.cancel</td> <td>Provides access to <code>POST</code> <code>/tasks/cancel</code>. route.</td></tr> <tr><td>tasks.delete</td> <td>Provides access to <code>DELETE</code> <code>/tasks</code> route.</td></tr> <tr><td>settings.get</td> <td>Provides access to <code>GET</code> <code>/indexes/:authorizedIndexes/settings</code> and <code>/indexes/:authorizedIndexes/settings/*</code> routes.</td></tr> <tr><td>settings.update</td> <td>Provides access to <code>POST / DELETE</code> <code>/indexes/:authorizedIndexes/settings</code> and <code>/indexes/:authorizedIndexes/settings/*</code> routes.</td></tr> <tr><td>stats.get</td> <td>Provides access to <code>GET</code> <code>/stats</code>. <strong>⚠️Non-authorized <code>indexes</code> are omitted from the response on <code>/stats</code></strong>. Also add access to <code>GET</code> <code>/indexes/:authorizedIndexes/stats</code>.</td></tr> <tr><td>metrics.get</td> <td>Provides access to <code>GET</code> <code>/metrics</code> route. <strong>A restriction on <code>indexes</code> stops you from calling the route.</strong></td></tr> <tr><td>dumps.create</td> <td>Provides access to <code>POST</code> <code>/dumps</code> route. <strong>As dumps are not scoped by indexes, a restriction on <code>indexes</code> does not affect this action.</strong></td></tr> <tr><td>snapshots.create</td> <td>Provides access to <code>POST</code> <code>/snapshots</code> route. <strong>As snapshots are not scoped by indexes, a restriction on <code>indexes</code> does not affect this action.</strong></td></tr> <tr><td>version</td> <td>Provides access to <code>GET</code> <code>/version</code> route.</td></tr> <tr><td>keys.get</td> <td>Provides access to <code>GET</code> <code>/keys</code> route.</td></tr> <tr><td>keys.create</td> <td>Provides access to <code>POST</code> <code>/keys</code> route.</td></tr> <tr><td>keys.update</td> <td>Provides access to <code>PATCH</code> <code>/keys</code> routes.</td></tr> <tr><td>keys.delete</td> <td>Provides access to <code>DELETE</code> <code>/keys</code> routes.</td></tr> <tr><td>experimental.get</td> <td>Provides access to <code>GET</code> <code>/experimental-features</code> routes.</td></tr> <tr><td>experimental.update</td> <td>Provides access to <code>PATCH</code> <code>/experimental-features</code> routes.</td></tr></tbody></table> <h6 id="_3-2-4-4-3-response-definition"><a href="#_3-2-4-4-3-response-definition" class="header-anchor">#</a> 3.2.4.4.3. Response Definition</h6> <p>Returns a <code>201 Created</code> HTTP code when the request is successful.</p> <p>See <a href="#3241-api-key-resource-representation">API Key Resource Representation</a> section for the response body.</p> <h6 id="_3-2-4-4-3-errors"><a href="#_3-2-4-4-3-errors" class="header-anchor">#</a> 3.2.4.4.3. Errors</h6> <ul><li>🔴 Accessing this route while a master key is not set for the instance returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_master_key">missing_master_key</a> error.</li> <li>🔴 Accessing this route without the <code>Authorization</code> header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header">missing_authorization_header</a> error.</li> <li>🔴 Accessing this route without the master key or an API key missing the <code>keys.create</code> permission returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li> <li>🔴 Omitting Content-Type header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_content_type">missing_content_type</a> error.</li> <li>🔴 Sending an empty Content-Type returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_content_type">invalid_content_type</a> error.</li> <li>🔴 Sending a different Content-Type than <code>application/json</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_content_type">invalid_content_type</a> error.</li> <li>🔴 Sending an empty payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_payload">missing_payload</a> error.</li> <li>🔴 Sending a different payload type than the Content-Type header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#malformed_payload">malformed_payload</a> error.</li> <li>🔴 Sending an invalid json format returns a <a href="/specifications/text/0061-error-format-and-definitions.html#malformed_payload">malformed_payload</a> error.</li> <li>🔴 Omitting <code>actions</code> field from the payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_api_key_actions">missing_api_key_actions</a> error.</li> <li>🔴 Omitting <code>indexes</code> field from the payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_api_key_indexes">missing_api_key_indexes</a> error.</li> <li>🔴 Omitting <code>expiresAt</code> field from the payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_api_key_expires_at">missing_api_key_expires_at</a> error.</li> <li>🔴 Sending an <code>uid</code> field that already exists returns an <a href="/specifications/text/0061-error-format-and-definitions.html#api_key_already_exists">api_key_already_exists</a> error.</li> <li>🔴 Sending an invalid value for the <code>uid</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_uid">invalid_api_key_uid</a> error.</li> <li>🔴 Sending an invalid value for the <code>actions</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_actions">invalid_api_key_actions</a> error.</li> <li>🔴 Sending an invalid value for the <code>indexes</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_indexes">invalid_api_key_indexes</a> error.</li> <li>🔴 Sending an invalid value for the <code>expiresAt</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_expires_at">invalid_api_key_expires_at</a> error.</li> <li>🔴 Sending an invalid value for the <code>name</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_name">invalid_api_key_name</a> error.</li> <li>🔴 Sending an invalid value for the <code>description</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_description">invalid_api_key_description</a> error.</li></ul> <h5 id="_3-2-4-5-patch-keys-uid-or-key"><a href="#_3-2-4-5-patch-keys-uid-or-key" class="header-anchor">#</a> 3.2.4.5. <code>PATCH</code> - <code>/keys/:uid_or_key</code></h5> <p>Update an API key found by it's <code>uid</code> or <code>key</code> field. Only the <code>name</code> and <code>description</code> fields of an API key can be modified.</p> <h6 id="_3-2-4-5-1-payload-definition"><a href="#_3-2-4-5-1-payload-definition" class="header-anchor">#</a> 3.2.4.5.1. Payload Definition</h6> <table><thead><tr><th>field</th> <th>type</th> <th>required</th> <th>description</th></tr></thead> <tbody><tr><td>name</td> <td>string</td> <td>Optional</td> <td>A name for the API Key. <strong>Default</strong>: <code>null</code></td></tr> <tr><td>description</td> <td>string</td> <td>Optional</td> <td>A description for the API key. <strong>Default</strong>: <code>null</code></td></tr></tbody></table> <h6 id="_3-2-4-5-2-response-definition"><a href="#_3-2-4-5-2-response-definition" class="header-anchor">#</a> 3.2.4.5.2. Response Definition</h6> <p>Returns a <code>200 Success</code> HTTP code when the request is successful.</p> <p>See <a href="#3241-api-key-resource-representation">API Key Resource Representation</a> section for the response body.</p> <h6 id="_3-2-4-5-3-errors"><a href="#_3-2-4-5-3-errors" class="header-anchor">#</a> 3.2.4.5.3. Errors</h6> <ul><li>🔴 Accessing this route while a master key is not set for the instance returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_master_key">missing_master_key</a> error.</li> <li>🔴 Accessing this route without the <code>Authorization</code> header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header">missing_authorization_header</a> error.</li> <li>🔴 Accessing this route without the master key or an API key missing the <code>keys.update</code> permission returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li> <li>🔴 Attempting to access an API key that does not exist returns a <a href="/specifications/text/0061-error-format-and-definitions.html#api_key_not_found">api_key_not_found</a> error.</li> <li>🔴 Omitting Content-Type header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_content_type">missing_content_type</a> error.</li> <li>🔴 Sending an empty Content-Type returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_content_type">invalid_content_type</a> error.</li> <li>🔴 Sending a different Content-Type than <code>application/json</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_content_type">invalid_content_type</a> error.</li> <li>🔴 Sending an empty payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_payload">missing_payload</a> error.</li> <li>🔴 Sending a different payload type than the Content-Type header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#malformed_payload">malformed_payload</a> error.</li> <li>🔴 Sending an invalid json format returns a <a href="/specifications/text/0061-error-format-and-definitions.html#malformed_payload">malformed_payload</a> error.</li> <li>🔴 Sending an invalid value for the <code>name</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_name">invalid_api_key_name</a> error.</li> <li>🔴 Sending an invalid value for the <code>description</code> field returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key_description">invalid_api_key_description</a> error.</li> <li>🔴 Sending <code>uid</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_uid">immutable_api_key_uid</a> error.</li> <li>🔴 Sending <code>key</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_key">immutable_api_key_key</a> error.</li> <li>🔴 Sending <code>actions</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_actions">immutable_api_key_actions</a> error.</li> <li>🔴 Sending <code>indexes</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_indexes">immutable_api_key_indexes</a> error.</li> <li>🔴 Sending <code>expiresAt</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_expires_at">immutable_api_key_expires_at</a> error.</li> <li>🔴 Sending <code>createdAt</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_created_at">immutable_api_key_created_at</a> error.</li> <li>🔴 Sending <code>updatedAt</code> in the payload request returns an <a href="/specifications/text/0061-error-format-and-definitions.html#immutable_api_key_updated_at">immutable_api_key_updated_at</a> error.</li></ul> <h5 id="_3-2-4-6-delete-keys-uid-or-key"><a href="#_3-2-4-6-delete-keys-uid-or-key" class="header-anchor">#</a> 3.2.4.6. <code>DELETE</code> - <code>/keys/:uid_or_key</code></h5> <p>Delete an API key found by it's <code>uid</code> or <code>key</code> field.</p> <h6 id="_3-2-4-6-1-payload-definition"><a href="#_3-2-4-6-1-payload-definition" class="header-anchor">#</a> 3.2.4.6.1. Payload Definition</h6> <p>n/a</p> <h6 id="_3-2-4-6-2-response-definition"><a href="#_3-2-4-6-2-response-definition" class="header-anchor">#</a> 3.2.4.6.2. Response Definition</h6> <p>Returns a <code>204 No-Content</code> HTTP code when the request is successful.</p> <h6 id="_3-2-4-6-3-errors"><a href="#_3-2-4-6-3-errors" class="header-anchor">#</a> 3.2.4.6.3. Errors</h6> <ul><li>🔴 Accessing this route while a master key is not set for the instance returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_master_key">missing_master_key</a> error.</li> <li>🔴 Accessing this route without the <code>Authorization</code> header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header">missing_authorization_header</a> error.</li> <li>🔴 Accessing this route without the master key or an API key missing the <code>keys.delete</code> permission returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li> <li>🔴 Attempting to access an API key that does not exist returns a <a href="/specifications/text/0061-error-format-and-definitions.html#api_key_not_found"><code>api_key_not_found</code></a> error.</li></ul> <h5 id="_3-2-4-7-using-an-api-key-on-client-code"><a href="#_3-2-4-7-using-an-api-key-on-client-code" class="header-anchor">#</a> 3.2.4.7. Using an API key on client-code</h5> <h6 id="_3-2-4-7-1-authorization-bearer-header"><a href="#_3-2-4-7-1-authorization-bearer-header" class="header-anchor">#</a> 3.2.4.7.1 Authorization Bearer Header</h6> <p>When the Meilisearch API is secured by the presence of a master key, the <code>Authorization</code> header must be used with a bearer to authorize requests. The specified value must be the value of the <code>key</code> field of an API key.</p> <div class="language- extra-class"><pre class="language-text"><code>    &quot;Authorization: Bearer `:key`&quot;
    &quot;Content-Type: application/json&quot;
</code></pre></div><ul><li>🔴 Accessing a route with an <code>API Key</code> that has expired, been deleted or don't have sufficient permissions returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li></ul> <h2 id="_4-technical-aspects"><a href="#_4-technical-aspects" class="header-anchor">#</a> 4. Technical Aspects</h2> <h3 id="_4-1-api-key-generation"><a href="#_4-1-api-key-generation" class="header-anchor">#</a> 4.1. API Key generation</h3> <p>An <code>uid</code> representing by a uuid v4 is generated if not specified at creation by the user.</p> <p>The final key is then an HMAC with the master key, as the secret, and the <code>uid</code>, a hyphenated Uuidv4, as the data. HMAC uses an SHA-256 algorithm internally.</p> <p>The final key could be generated with openssl as below:</p> <div class="language- extra-class"><pre><code>echo -n $HYPHENATED_UUID | openssl dgst -sha256 -hmac $MASTER_KEY
</code></pre></div><h3 id="_4-2-synchronous-write-of-api-key-resources"><a href="#_4-2-synchronous-write-of-api-key-resources" class="header-anchor">#</a> 4.2. Synchronous write of <code>API Key</code> resources</h3> <p>Writing to <code>/keys</code> endpoints are synchronous in order to return errors directly to the user when he performs an operation on them. This means that API key management operations do not appear as a task on <code>/tasks</code>.</p> <h3 id="_4-3-propagating-api-key-to-dumps"><a href="#_4-3-propagating-api-key-to-dumps" class="header-anchor">#</a> 4.3. Propagating <code>API Key</code> to dumps.</h3> <p>The generated API keys must also transit within a dump to facilitate the upgrade of a MeiliSearch instance.</p> <blockquote><p>🚨 As a reminder, dumps must be stored in secure areas not accessible to the public or unaccredited persons. In general, you should avoid moving them off the host machine or do so via a secure channel as a security measure.</p></blockquote> <p>If the dumps ever leak, the api keys cannot be spoofed from the dump inspection because it needs the master key to have the full value of a valid API key. Only the <code>uid</code> value is propagated in the dumps.</p> <h3 id="_4-4-propagating-api-key-to-snapshots"><a href="#_4-4-propagating-api-key-to-snapshots" class="header-anchor">#</a> 4.4. Propagating <code>API Key</code> to snapshots.</h3> <p>The generated API keys must also transit within a snapshot to facilitate the recovery of a MeiliSearch instance.</p> <blockquote><p>🚨 As a reminder, snapshots must be stored in secure areas not accessible to the public or unaccredited persons. In general, you should avoid moving them off the host machine or do so via a secure channel as a security measure.</p></blockquote> <p>If the snapshot ever leak, the <code>API keys</code> cannot be spoofed from the snapshot inspection because it needs the master key to have the full value of a valid <code>API key</code>. Only the <code>uid</code> value is propagated in the snapshots.</p> <h3 id="_4-5-api-keys-storage-size-limit"><a href="#_4-5-api-keys-storage-size-limit" class="header-anchor">#</a> 4.5. API Keys storage size limit</h3> <p>The maximum size of the API key storage layer is <code>100GB</code>.</p> <h2 id="_5-future-possibilities"><a href="#_5-future-possibilities" class="header-anchor">#</a> 5. Future Possibilities</h2> <ul><li>Regenerate a specific <code>API Key</code>.</li> <li>Have an &quot;archive&quot; state where manually deleted API Keys can be restored for a certain amount of time.</li> <li>Add rate-limiting per API Key.</li> <li>A restriction on the maximum offset/limit.</li> <li>Add search parameters restrictions for an API Key.</li> <li>Add rfc2822 format expression for <code>expiredAt</code> field. e.g. <code>Wed, 18 Feb 2022 23:16:09 GMT</code></li> <li>Add an alias that can only be associated to one API Key to retrieve it easily on client side. e.g. <code>GET /keys/:uid_or_alias</code></li> <li>Supports wildcard expressions at the start/middle of a string.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/specifications/text/0077-words-position-limit.html" class="prev">
        Words position limit
      </a></span> <span class="next"><a href="/specifications/text/0089-tenant-tokens.html">
        Tenant tokens
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2f2009b5.js" defer></script><script src="/assets/js/3.4da56047.js" defer></script><script src="/assets/js/29.67490c23.js" defer></script>
  </body>
</html>
