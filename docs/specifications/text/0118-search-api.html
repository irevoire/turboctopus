<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Search API | Welcome to the Meilisearch specifications!</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.b26ff90a.css" as="style"><link rel="preload" href="/assets/js/app.20032470.js" as="script"><link rel="preload" href="/assets/js/3.4da56047.js" as="script"><link rel="preload" href="/assets/js/34.8f065dee.js" as="script"><link rel="prefetch" href="/assets/js/10.9a3f0095.js"><link rel="prefetch" href="/assets/js/11.b7de9b10.js"><link rel="prefetch" href="/assets/js/12.31781feb.js"><link rel="prefetch" href="/assets/js/13.5ee4202d.js"><link rel="prefetch" href="/assets/js/14.c09b1487.js"><link rel="prefetch" href="/assets/js/15.095125b3.js"><link rel="prefetch" href="/assets/js/16.166f3cec.js"><link rel="prefetch" href="/assets/js/17.052e3dd6.js"><link rel="prefetch" href="/assets/js/18.145cf324.js"><link rel="prefetch" href="/assets/js/19.be4b88e4.js"><link rel="prefetch" href="/assets/js/20.fe442e43.js"><link rel="prefetch" href="/assets/js/21.731a736d.js"><link rel="prefetch" href="/assets/js/22.d2a0a444.js"><link rel="prefetch" href="/assets/js/23.582f3200.js"><link rel="prefetch" href="/assets/js/24.71bff866.js"><link rel="prefetch" href="/assets/js/25.c3c8a97b.js"><link rel="prefetch" href="/assets/js/26.949faf8b.js"><link rel="prefetch" href="/assets/js/27.5f394637.js"><link rel="prefetch" href="/assets/js/28.8111d4f5.js"><link rel="prefetch" href="/assets/js/29.a05f4317.js"><link rel="prefetch" href="/assets/js/30.ffe8feb9.js"><link rel="prefetch" href="/assets/js/31.8f997ffc.js"><link rel="prefetch" href="/assets/js/32.3d0e4e96.js"><link rel="prefetch" href="/assets/js/33.63b5ee32.js"><link rel="prefetch" href="/assets/js/35.6f79f9fa.js"><link rel="prefetch" href="/assets/js/36.dd915f40.js"><link rel="prefetch" href="/assets/js/37.1d009b1c.js"><link rel="prefetch" href="/assets/js/38.bfdf6fc9.js"><link rel="prefetch" href="/assets/js/39.c0e59772.js"><link rel="prefetch" href="/assets/js/4.aaee11b0.js"><link rel="prefetch" href="/assets/js/40.d0feb147.js"><link rel="prefetch" href="/assets/js/41.1f8df8c1.js"><link rel="prefetch" href="/assets/js/42.abb4f81a.js"><link rel="prefetch" href="/assets/js/43.af7cbf45.js"><link rel="prefetch" href="/assets/js/44.97d19d44.js"><link rel="prefetch" href="/assets/js/45.6c35ad02.js"><link rel="prefetch" href="/assets/js/46.9f9d4a1b.js"><link rel="prefetch" href="/assets/js/47.7fd9ce9f.js"><link rel="prefetch" href="/assets/js/48.ec308202.js"><link rel="prefetch" href="/assets/js/49.61a203fe.js"><link rel="prefetch" href="/assets/js/5.06848b4d.js"><link rel="prefetch" href="/assets/js/50.5561182d.js"><link rel="prefetch" href="/assets/js/51.2eb15273.js"><link rel="prefetch" href="/assets/js/52.55ac3382.js"><link rel="prefetch" href="/assets/js/53.596da25a.js"><link rel="prefetch" href="/assets/js/54.36756f53.js"><link rel="prefetch" href="/assets/js/55.822b98a2.js"><link rel="prefetch" href="/assets/js/56.f8afd4eb.js"><link rel="prefetch" href="/assets/js/57.8e2e3603.js"><link rel="prefetch" href="/assets/js/58.d5c1f6a1.js"><link rel="prefetch" href="/assets/js/59.fcb2ec42.js"><link rel="prefetch" href="/assets/js/6.87f02c74.js"><link rel="prefetch" href="/assets/js/60.5e7d293f.js"><link rel="prefetch" href="/assets/js/61.556679de.js"><link rel="prefetch" href="/assets/js/62.371c5b80.js"><link rel="prefetch" href="/assets/js/63.6da3fdac.js"><link rel="prefetch" href="/assets/js/64.c7d24e65.js"><link rel="prefetch" href="/assets/js/65.cb3ec6ff.js"><link rel="prefetch" href="/assets/js/66.74682a96.js"><link rel="prefetch" href="/assets/js/67.6322aeae.js"><link rel="prefetch" href="/assets/js/68.7ce3facc.js"><link rel="prefetch" href="/assets/js/7.fadbe260.js"><link rel="prefetch" href="/assets/js/8.e63f62a9.js"><link rel="prefetch" href="/assets/js/9.0c014273.js"><link rel="prefetch" href="/assets/js/vendors~docs-searchbar.9a2822a3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b26ff90a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Welcome to the Meilisearch specifications!</span></a> <div class="links"><form id="search-form" role="search" class="meilisearch-search-wrapper search-box"><input id="meilisearch-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/specifications/text/specifications/text/0000-specification-template.html" class="nav-link">
  Specification
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/specifications/text/specifications/text/0000-specification-template.html" class="nav-link">
  Specification
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/specifications/text/0000-specification-template.html" class="sidebar-link">Specification template</a></li><li><a href="/specifications/text/0001-frontend-disable-prod.html" class="sidebar-link">Frontend disable prod</a></li><li><a href="/specifications/text/0001-script-based-tokenizer.html" class="sidebar-link">Script based tokenizer</a></li><li><a href="/specifications/text/0028-indexing-csv.html" class="sidebar-link">Indexing csv</a></li><li><a href="/specifications/text/0029-indexing-ndjson.html" class="sidebar-link">Indexing ndjson</a></li><li><a href="/specifications/text/0032-distinct-attribute.html" class="sidebar-link">Distinct attribute</a></li><li><a href="/specifications/text/0033-logging.html" class="sidebar-link">Logging</a></li><li><a href="/specifications/text/0034-telemetry-policies.html" class="sidebar-link">Telemetry policies</a></li><li><a href="/specifications/text/0038-rename-attributes-for-faceting.html" class="sidebar-link">Rename attributes for faceting</a></li><li><a href="/specifications/text/0043-phrase-query.html" class="sidebar-link">Phrase query</a></li><li><a href="/specifications/text/0047-reset-stop-words-synonyms-settings-with-null.html" class="sidebar-link">Reset stop words synonyms settings with null</a></li><li><a href="/specifications/text/0048-rename-max-mdb-size-var.html" class="sidebar-link">Rename max mdb size var</a></li><li><a href="/specifications/text/0055-sort.html" class="sidebar-link">Sort</a></li><li><a href="/specifications/text/0059-geo-search.html" class="sidebar-link">Geo search</a></li><li><a href="/specifications/text/0060-tasks-api.html" class="sidebar-link">Tasks api</a></li><li><a href="/specifications/text/0061-error-format-and-definitions.html" class="sidebar-link">Error format and definitions</a></li><li><a href="/specifications/text/0077-words-position-limit.html" class="sidebar-link">Words position limit</a></li><li><a href="/specifications/text/0085-api-keys.html" class="sidebar-link">Api keys</a></li><li><a href="/specifications/text/0089-tenant-tokens.html" class="sidebar-link">Tenant tokens</a></li><li><a href="/specifications/text/0096-auto-batching.html" class="sidebar-link">Auto batching</a></li><li><a href="/specifications/text/0105-dumps-api.html" class="sidebar-link">Dumps api</a></li><li><a href="/specifications/text/0117-typo-tolerance-setting-api.html" class="sidebar-link">Typo tolerance setting api</a></li><li><a href="/specifications/text/0118-search-api.html" aria-current="page" class="active sidebar-link">Search api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/specifications/text/0118-search-api.html#_1-summary" class="sidebar-link">1. Summary</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0118-search-api.html#_2-motivation" class="sidebar-link">2. Motivation</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0118-search-api.html#_3-functional-specification" class="sidebar-link">3. Functional Specification</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0118-search-api.html#_2-technical-details" class="sidebar-link">2. Technical Details</a></li><li class="sidebar-sub-header"><a href="/specifications/text/0118-search-api.html#_3-future-possibilities" class="sidebar-link">3. Future Possibilities</a></li></ul></li><li><a href="/specifications/text/0119-instance-options.html" class="sidebar-link">Instance options</a></li><li><a href="/specifications/text/0121-data-types.html" class="sidebar-link">Data types</a></li><li><a href="/specifications/text/0123-displayed-attributes-setting-api.html" class="sidebar-link">Displayed attributes setting api</a></li><li><a href="/specifications/text/0123-distinct-attribute-setting-api.html" class="sidebar-link">Distinct attribute setting api</a></li><li><a href="/specifications/text/0123-filterable-attributes-setting-api.html" class="sidebar-link">Filterable attributes setting api</a></li><li><a href="/specifications/text/0123-proximity-precision.html" class="sidebar-link">Proximity precision</a></li><li><a href="/specifications/text/0123-ranking-rules-setting-api.html" class="sidebar-link">Ranking rules setting api</a></li><li><a href="/specifications/text/0123-searchable-attributes-setting-api.html" class="sidebar-link">Searchable attributes setting api</a></li><li><a href="/specifications/text/0123-separators-settings-api.html" class="sidebar-link">Separators settings api</a></li><li><a href="/specifications/text/0123-settings-api.html" class="sidebar-link">Settings api</a></li><li><a href="/specifications/text/0123-sortable-attributes-setting-api.html" class="sidebar-link">Sortable attributes setting api</a></li><li><a href="/specifications/text/0123-stop-words-setting-api.html" class="sidebar-link">Stop words setting api</a></li><li><a href="/specifications/text/0123-synonyms-setting-api.html" class="sidebar-link">Synonyms setting api</a></li><li><a href="/specifications/text/0123-user-dictionary-settings-api.html" class="sidebar-link">User dictionary settings api</a></li><li><a href="/specifications/text/0124-documents-api.html" class="sidebar-link">Documents api</a></li><li><a href="/specifications/text/0132-indexes-api.html" class="sidebar-link">Indexes api</a></li><li><a href="/specifications/text/0134-stats-api.html" class="sidebar-link">Stats api</a></li><li><a href="/specifications/text/0135-indexing-json.html" class="sidebar-link">Indexing json</a></li><li><a href="/specifications/text/0136-documents-soft-deletion.html" class="sidebar-link">Documents soft deletion</a></li><li><a href="/specifications/text/0171-version-api.html" class="sidebar-link">Version api</a></li><li><a href="/specifications/text/0172-health-api.html" class="sidebar-link">Health api</a></li><li><a href="/specifications/text/0174-metrics-api.html" class="sidebar-link">Metrics api</a></li><li><a href="/specifications/text/0178-compression-headers.html" class="sidebar-link">Compression headers</a></li><li><a href="/specifications/text/0185-configuration-file.html" class="sidebar-link">Configuration file</a></li><li><a href="/specifications/text/0191-swap-indexes-api.html" class="sidebar-link">Swap indexes api</a></li><li><a href="/specifications/text/0192-multi-search-api.html" class="sidebar-link">Multi search api</a></li><li><a href="/specifications/text/0193-experimental-features.html" class="sidebar-link">Experimental features</a></li><li><a href="/specifications/text/0194-experimental-feature-api.html" class="sidebar-link">Experimental feature api</a></li><li><a href="/specifications/text/0195-ranking-score.html" class="sidebar-link">Ranking score</a></li><li><a href="/specifications/text/0246-facet-search-api.html" class="sidebar-link">Facet search api</a></li><li><a href="/specifications/text/0258-snapshots-api.html" class="sidebar-link">Snapshots api</a></li><li><a href="/specifications/text/0262-task-queue-webhook.html" class="sidebar-link">Task queue webhook</a></li><li><a href="/specifications/text/157-faceting-setting-api.html" class="sidebar-link">Aceting setting api</a></li><li><a href="/specifications/text/157-pagination-setting-api.html" class="sidebar-link">Agination setting api</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="search-api"><a href="#search-api" class="header-anchor">#</a> Search API</h1> <h2 id="_1-summary"><a href="#_1-summary" class="header-anchor">#</a> 1. Summary</h2> <p>The search endpoints retrieve documents from an index. Their returned documents are considered relevant based on the settings of the index and the provided search parameters.</p> <h2 id="_2-motivation"><a href="#_2-motivation" class="header-anchor">#</a> 2. Motivation</h2> <p>N/A</p> <h2 id="_3-functional-specification"><a href="#_3-functional-specification" class="header-anchor">#</a> 3. Functional Specification</h2> <p>Meilisearch exposes 2 routes to perform search requests:</p> <ul><li><p>GET <code>indexes/:index_uid/search</code></p></li> <li><p>POST <code>indexes/:index_uid/search</code></p></li> <li><p>🔴 Sending an invalid index uid format for the <code>:index_uid</code> path parameter returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_index_uid">invalid_index_uid</a> error.</p></li> <li><p>🔴 If the index does not exist, the API returns an <a href="/specifications/text/0061-error-format-and-definitions.html#index_not_found">index_not_found</a> error.</p></li></ul> <p>If a master key is used to secure a Meilisearch instance, the auth layer returns the following errors:</p> <ul><li>🔴 Accessing these routes without the <code>Authorization</code> header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_authorization_header">missing_authorization_header</a> error.</li> <li>🔴 Accessing these routes with a key that does not have permissions (i.e. other than the master key) returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_api_key">invalid_api_key</a> error.</li></ul> <p><code>POST</code> HTTP verb errors:</p> <ul><li>🔴 Omitting the Content-Type header returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_content_type">missing_content_type</a> error.</li> <li>🔴 Sending an empty Content-Type returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_content_type">invalid_content_type</a> error.</li> <li>🔴 Sending a different Content-Type than <code>application/json</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_content_type">invalid_content_type</a> error.</li> <li>🔴 Sending an empty payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#missing_payload">missing_payload</a> error.</li> <li>🔴 Sending an invalid JSON payload returns a <a href="/specifications/text/0061-error-format-and-definitions.html#malformed_payload">malformed_payload</a> error.</li></ul> <h3 id="_3-1-search-payload-parameters"><a href="#_3-1-search-payload-parameters" class="header-anchor">#</a> 3.1. Search Payload Parameters</h3> <table><thead><tr><th>Field</th> <th>Type</th> <th>Required</th></tr></thead> <tbody><tr><td><a href="#311-q"><code>q</code></a></td> <td>String</td> <td>False</td></tr> <tr><td><a href="#312-filter"><code>filter</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#313-sort"><code>sort</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#314-facets"><code>facets</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#315-limit"><code>limit</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#316-offset"><code>offset</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#317-page"><code>page</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#318-hitsperpage"><code>hitsPerPage</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#319-attributestoretrieve"><code>attributesToRetrieve</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#3110-attributestohighlight"><code>attributesToHighlight</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#3111-highlightpretag"><code>highlightPreTag</code></a></td> <td>String</td> <td>False</td></tr> <tr><td><a href="#3112-highlightposttag"><code>highlightPostTag</code></a></td> <td>String</td> <td>False</td></tr> <tr><td><a href="#3113-attributestocrop"><code>attributesToCrop</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#3114-croplength"><code>cropLength</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#3115-cropmarker"><code>cropMarker</code></a></td> <td>String</td> <td>False</td></tr> <tr><td><a href="#3116-showmatchesposition"><code>showMatchesPosition</code></a></td> <td>Boolean</td> <td>False</td></tr> <tr><td><a href="#3117-showrankingscore"><code>showRankingScore</code></a></td> <td>Boolean</td> <td>False</td></tr> <tr><td><a href="#3118-showrankingscoredetails"><code>showRankingScoreDetails</code></a></td> <td>Boolean</td> <td>False</td></tr> <tr><td><a href="#3119-matchingStrategy"><code>matchingStrategy</code></a></td> <td>String</td> <td>False</td></tr> <tr><td><a href="#3120-attributesToSearchOn"><code>attributesToSearchOn</code></a></td> <td>Array of String - String</td> <td>False</td></tr> <tr><td><a href="#3121-vector"><code>vector</code></a> <code>EXPERIMENTAL</code></td> <td>Array of Float</td> <td>False</td></tr></tbody></table> <h4 id="_3-1-1-q"><a href="#_3-1-1-q" class="header-anchor">#</a> 3.1.1. <code>q</code></h4> <ul><li>Type: String</li> <li>Required: False</li> <li>Default: <code>null</code></li></ul> <p><code>q</code> contains the terms to search within the index documents.</p> <blockquote><p>When q isn't specified, Meilisearch performs a <strong>placeholder search</strong>. A placeholder search returns all searchable documents in an index, modified by any search parameters used and sorted by that index's custom ranking rules. If the index has no sort search parameter or custom ranking rules, the results are returned in the order of their internal database position.</p></blockquote> <blockquote><p>Meilisearch only considers the first ten words of any given search query to deliver a fast search-as-you-type experience.</p></blockquote> <blockquote><p><code>q</code> supports the <a href="/specifications/text/0043-phrase-query.html">Phrase Query</a> expression.</p></blockquote> <ul><li>🔴 Sending a value with a different type than <code>String</code> or <code>null</code> for <code>q</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_q">invalid_search_q</a> error.</li></ul> <h4 id="_3-1-2-filter"><a href="#_3-1-2-filter" class="header-anchor">#</a> 3.1.2. <code>filter</code></h4> <ul><li>Type: String (POST/GET) | Array of (String, Array of String) (POST)</li> <li>Required: False</li> <li>Default: <code>[]|null</code></li></ul> <p><code>filter</code> contains a filter expression written as a string or an array of (strings and array of strings). Its purpose is to refine search results by selecting documents that match the given filter and running the search query only on those documents.</p> <p>Attributes used as filter criteria must be added to the <code>filterableAttributes</code> list of an index settings. See <a href="/specifications/text/0123-filterable-attributes-setting-api.html">Filterable Attributes Setting API</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>String</code>(GET/POST), <code>Array of (Array of String, String) (POST)</code>, or <code>null</code> for <code>filter</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_filter">invalid_search_filter</a> error.</li> <li>🔴 Sending an invalid syntax for <code>filter</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_filter">invalid_search_filter</a> error.</li> <li>🔴 Sending a field not defined as a <code>filterableAttributes</code> for <code>filter</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_filter">invalid_search_filter</a> error.</li></ul> <h5 id="_3-1-2-1-string-syntax"><a href="#_3-1-2-1-string-syntax" class="header-anchor">#</a> 3.1.2.1. String Syntax</h5> <h6 id="_3-1-2-1-1-grammar"><a href="#_3-1-2-1-1-grammar" class="header-anchor">#</a> 3.1.2.1.1 Grammar</h6> <p>The grammar of the filter syntax is given below in pseudo-BNF form:</p> <div class="language- extra-class"><pre class="language-text"><code>filter         = expression EOF
expression     = or
or             = and (&quot;OR&quot; WS+ and)*
and            = not (&quot;AND&quot; WS+ not)*
not            = (&quot;NOT&quot; WS+ not) | primary
primary        = &quot;(&quot; WS* expression WS* &quot;)&quot; | geoRadius | geoBoundingBox | in | condition | exists | not_exists | to
in             = attribute &quot;IN&quot; WS* &quot;[&quot; value_list &quot;]&quot;
condition      = attribute (&quot;=&quot; | &quot;!=&quot; | &quot;&gt;&quot; | &quot;&gt;=&quot; | &quot;&lt;&quot; | &quot;&lt;=&quot;) value
exists         = attribute &quot;EXISTS&quot;
not_exists     = attribute &quot;NOT&quot; WS+ &quot;EXISTS&quot;
to             = attribute value &quot;TO&quot; WS+ value
value          = WS* ( word | singleQuoted | doubleQuoted) WS+
attribute      = value
value_list     = (value (&quot;,&quot; value)* &quot;,&quot;?)?
singleQuoted   = &quot;'&quot; single_quoted_string &quot;'&quot;
doubleQuoted   = &quot;\&quot;&quot; double_quoted_string &quot;\&quot;&quot;
word           = ([a-zA-Z0-9] | &quot;_&quot; | &quot;-&quot; | &quot;.&quot;)+
geoRadius      = &quot;_geoRadius(&quot; WS* float WS* &quot;,&quot; WS* float WS* &quot;,&quot; float WS* &quot;)&quot;
float          = [+-]?[0-9]*(&quot;.&quot;[0-9]+)?((&quot;E&quot;|&quot;e&quot;) [+-]?[0-9]+)?
WS             = ' ' | '\t' | '\r' | '\n'
</code></pre></div><p>where <code>single_quoted_string</code> and <code>double_quoted_string</code> can contain anything except unescaped single quotes <code>'</code> and unescaped double quotes <code>&quot;</code>, respectively. Quotes are escaped by a preceding backslash. For example: <code>&quot;escaped \&quot; double quote&quot; &quot;</code> and <code>escaped \' single quote</code>. If a backslash is not followed by the correct quote, it is kept in the string.</p> <h6 id="_3-1-2-1-2-naming-a-filterable-attribute"><a href="#_3-1-2-1-2-naming-a-filterable-attribute" class="header-anchor">#</a> 3.1.2.1.2 Naming a filterable attribute</h6> <p>A filterable attribute can appear in a filter by its unquoted name if it only contains ascii alphanumeric characters, dots, hyphens, and underscores.</p> <p>For example, each filter below selects the documents where the given filterable attribute (on the left side of the equal) is equal to a specific value (on the right side):</p> <div class="language- extra-class"><pre class="language-text"><code>genres = &quot;film&quot;
genre.subgenre = &quot;adventure&quot;
_geo.lat = 1.23
101 = &quot;abc&quot;
</code></pre></div><p>If the filterable attribute is composed of multiple words or contains other characters, it must be quoted, either using single quotes or double quotes:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;place of birth&quot; = Berlin
&quot;∆&quot; = 2.1
&quot;Friend's name&quot; = Albus
'opinion on &quot;the best search engine&quot;' = &quot;meilisearch&quot;
</code></pre></div><p>If the filterable attribute contains the same quote character that surrounds the attribute, then this quote character must be escaped by a preceding backslash:</p> <div class="language- extra-class"><pre class="language-text"><code>'Friend\'s name' = Albus
</code></pre></div><h5 id="_3-1-2-1-3-naming-the-value-of-a-filterable-attribute"><a href="#_3-1-2-1-3-naming-the-value-of-a-filterable-attribute" class="header-anchor">#</a> 3.1.2.1.3 Naming the value of a filterable attribute</h5> <p>The grammar for the value of a filterable attribute is the same as the grammar for filterable attributes themselves.</p> <h5 id="_3-1-2-1-4-list-of-supported-operators"><a href="#_3-1-2-1-4-list-of-supported-operators" class="header-anchor">#</a> 3.1.2.1.4 List of supported operators</h5> <ul><li>Equality: <code>attribute = value</code></li> <li>Inequality: <code>attribute != value</code></li> <li>Comparison:
<ul><li><code>attribute &lt; value</code></li> <li><code>attribute &lt;= value</code></li> <li><code>attribute &gt; value</code></li> <li><code>attribute &gt;= value</code></li> <li><code>attribute value TO value</code></li></ul></li> <li>Exists:
<ul><li><code>attribute EXISTS</code></li> <li><code>attribute NOT EXISTS</code></li></ul></li> <li>IN:
<ul><li><code>attribute IN[value, value, etc.]</code></li> <li><code>attribute NOT IN[value, value, etc.]</code></li></ul></li> <li>IS EMPTY:
<ul><li><code>attribute IS EMPTY</code></li> <li><code>attribute IS NOT EMPTY</code></li></ul></li> <li>IS NULL:
<ul><li><code>attribute IS NULL</code></li> <li><code>attribute IS NOT NULL</code></li></ul></li> <li>AND: <code>filter AND filter</code></li> <li>OR: <code>filter OR filter</code></li> <li>NOT: <code>NOT filter</code></li> <li>GeoSearch: <code>_geoRadius(lat, lng, distance)</code></li> <li>GeoSearch: <code>_geoBoundingBox([lat, lng], [lat, lng])</code></li></ul> <h6 id="_3-1-2-1-5-equality"><a href="#_3-1-2-1-5-equality" class="header-anchor">#</a> 3.1.2.1.5 Equality</h6> <p>The equality operator, <code>=</code>, selects the documents for which:</p> <ol><li>the given filterable attribute exists; and</li> <li>the attribute contains a value that is equal to a specific value</li></ol> <p>It is an infix operator that takes an attribute name on the left hand side and a value on the right hand side.</p> <p>For example, given the documents:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;L&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token string">&quot;small&quot;</span>
    <span class="token property">&quot;shop_distance&quot;</span><span class="token operator">:</span> <span class="token number">1.2e+5</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>then the filter:</p> <div class="language- extra-class"><pre class="language-text"><code>size = 1
</code></pre></div><p>will select the documents with ids <code>0</code> and <code>1</code>.</p> <p>Note that there is no way to specify whether the value on the right hand side of the equality should be interpreted as a string or as a number. Meilisearch will always try to match both. And since unquoted values cannot contain the <code>+</code> character, it is in fact necessary to quote floating point numbers that have positive exponents:</p> <div class="language- extra-class"><pre class="language-text"><code>shop_distance = &quot;1.2e+5&quot;
</code></pre></div><p>will select the document with id <code>3</code>.</p> <p>Furthermore, there is no way to check whether an attribute has a value that is <code>null</code> or an array. An attribute whose value is <code>null</code> or an empty array is considered not to have any value and will therefore never be matched by an equality operator.</p> <h6 id="_3-1-2-1-6-inequality"><a href="#_3-1-2-1-6-inequality" class="header-anchor">#</a> 3.1.2.1.6 Inequality</h6> <p>The inequality operator selects all documents that are not selected by the equality operator.
With the same documents given as examples to the equality operator, the following filter:</p> <div class="language- extra-class"><pre class="language-text"><code>size != 1
</code></pre></div><p>will select the documents with ids <code>2</code> and <code>3</code>.</p> <p>Note that <code>attribute != value</code> is equivalent to <code>NOT attribute = value</code>.</p> <p>Furthermore, there is no way to write a filter to select documents which contain a value that is different than a given string or number. In the example above, <code>size != 1</code> did not select the document with id <code>1</code>, even though its <code>size</code> attribute contains the value <code>&quot;L&quot;</code>, which is different than <code>1</code>.</p> <h6 id="_3-1-2-1-7-comparison"><a href="#_3-1-2-1-7-comparison" class="header-anchor">#</a> 3.1.2.1.7 Comparison</h6> <p>The comparison operators select the documents for which:</p> <ol><li>the filterable attribute exists; and</li> <li>the attribute contains a number that satisfies the comparison</li></ol> <p>Note that the right hand side of the comparison must be a valid floating point number.</p> <p>For example, with the documents:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;small&quot;</span><span class="token punctuation">]</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>Then the following filters will select these documents:</p> <div class="language- extra-class"><pre class="language-text"><code>size &gt; 1      -&gt; selects [1]
size &gt;= 1     -&gt; selects [1,2]
size &lt; 2      -&gt; selects [0,1]
size &lt;= 2     -&gt; selects [0,1,2]
size -1 TO 2  -&gt; equivalent to size &gt;= -1 AND size &lt;= 2 -&gt; selects [0,1,2]
</code></pre></div><p>And the following filters are invalid:</p> <div class="language- extra-class"><pre class="language-text"><code>size &gt; &quot;small&quot;
size &quot;larga&quot; TO &quot;largz&quot;
</code></pre></div><h5 id="_3-1-2-1-8-combining-filter-conditions"><a href="#_3-1-2-1-8-combining-filter-conditions" class="header-anchor">#</a> 3.1.2.1.8 Combining filter conditions</h5> <p>Multiple filters can be combined together using the operators <code>AND</code> and <code>OR</code>. These infix operators take two sub-filters as arguments.</p> <p>The <code>AND</code> operator selects the documents that are selected by both subfilters at the same time. In other words, it is an intersection of the two sets of documents selected by the sub-filters.</p> <p>The <code>OR</code> operator selects the documents that are selected by either operator. In other words, it is a union of the two sets of documents selected by the sub-filters.</p> <p>Note that <code>AND</code> has a higher precedence than <code>OR</code>. Therefore, the following filter:</p> <div class="language- extra-class"><pre class="language-text"><code>x = 1 AND y = 2 OR z = 3
</code></pre></div><p>will be interepreted as:</p> <div class="language- extra-class"><pre class="language-text"><code>(x = 1 AND y = 2) OR (z = 3)
</code></pre></div><p>With the same documents given as examples for the comparison operators, the following filters will select these documents:</p> <div class="language- extra-class"><pre class="language-text"><code>size = 0 OR size = 1                       -&gt; selects [0,1]
size = 0 AND (size = 2 OR colour = &quot;blue&quot;) -&gt; selects []
size = 0 AND size = 2 OR colour = &quot;blue&quot;   -&gt; selects [0]
size &gt; 5 AND size &lt; 5                      -&gt; selects [2]
</code></pre></div><h6 id="_3-1-2-1-9-negating-a-filter"><a href="#_3-1-2-1-9-negating-a-filter" class="header-anchor">#</a> 3.1.2.1.9 Negating a filter</h6> <p>The negation operator, <code>NOT</code>, is used to select all documents that are not selected by a sub-filter. It is a prefix operator that takes one argument. Its precedence is higher than both <code>AND</code> and <code>OR</code>.</p> <p>With the same documents given as examples for the comparison operators, the following filters will select these documents:</p> <div class="language- extra-class"><pre class="language-text"><code>NOT size = 0                               -&gt; selects [1,2]
NOT (size = 0 OR size = 1)                 -&gt; selects [2]
NOT size = 0 OR size = 1                   -&gt; selects [1,2]
NOT (size &lt; 2 AND colour = &quot;blue&quot;)         -&gt; selects [1,2]
NOT size &lt; 2 AND colour = &quot;blue&quot;           -&gt; selects []
size = 0 OR NOT size = 2                   -&gt; selects [0,1]
NOT (NOT size = 0)                         -&gt; selects [0]
</code></pre></div><h6 id="_3-1-2-1-10-exists"><a href="#_3-1-2-1-10-exists" class="header-anchor">#</a> 3.1.2.1.10 EXISTS</h6> <p>The <code>EXISTS</code> operator selects the documents for which the filterable attribute exists, even if its value is <code>null</code> or an empty array. It is a postfix operator that takes an attribute name as argument.</p> <p>The negated form of <code>EXISTS</code> can be written in two ways:</p> <div class="language- extra-class"><pre class="language-text"><code>attribute NOT EXISTS
NOT attribute EXISTS
</code></pre></div><p>Both forms are equivalent. They select the documents for which the attribute does not exist.</p> <p>For example, with the documents:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>Then the filter <code>colour EXISTS</code> selects the document ids <code>[0,1]</code> while the filter <code>colour NOT EXISTS</code> or <code>NOT colour EXISTS</code> selects the document ids <code>[2]</code>.</p> <h6 id="_3-1-2-1-11-in"><a href="#_3-1-2-1-11-in" class="header-anchor">#</a> 3.1.2.1.11 IN</h6> <p>The <code>IN[..]</code> operator is a more concise way to combine equality operators. It is a postfix operator that takes an attribute name on the left hand side and an array of values on the right hand side. An array of value is a comma-separated list of values delimited by square brackets.</p> <p>The two filters below are equivalent:</p> <div class="language- extra-class"><pre class="language-text"><code>attribute IN[value1, value2, value3,]

attribute = value1 OR attribute = value2 OR attribute = value3
</code></pre></div><p>In short, <code>IN</code> selects the documents for which:</p> <ol><li>the filterable attribute exists; and</li> <li>the attribute contains a value that is equal to any of the values in the array</li></ol> <p>The negated form of <code>IN</code> can be written in two different ways:</p> <div class="language- extra-class"><pre class="language-text"><code>attribute NOT IN [value1, value2, etc.]
NOT attribute IN [value1, value2, etc.]
</code></pre></div><p>and it is equivalent to:</p> <div class="language- extra-class"><pre class="language-text"><code>attribute != value1 AND attribute != value2 AND ...
</code></pre></div><h6 id="_3-1-2-1-12-geo-search"><a href="#_3-1-2-1-12-geo-search" class="header-anchor">#</a> 3.1.2.1.12 Geo Search</h6> <ul><li>The <code>_geoRadius</code> operator selects the documents whose geographical coordinates fall within a certain range of a given coordinate. See <a href="/specifications/text/0059-geo-search.html">GeoSearch</a> for more information.</li> <li>The <code>_geoBoundingBox</code> operator selects the documents whose geographical coordinates fall within a square described by the given coordinates. See <a href="/specifications/text/0059-geo-search.html">GeoSearch</a> for more information.</li></ul> <h6 id="_3-1-2-1-12-is-empty"><a href="#_3-1-2-1-12-is-empty" class="header-anchor">#</a> 3.1.2.1.12 IS EMPTY</h6> <p>The <code>IS EMPTY</code> operator selects the documents for which the filterable attribute exists and is empty. If the attribute doesn't exists then it is not empty and the document will not be returned. It is a postfix operator that takes an attribute name as argument.</p> <p>The negated form of <code>IS EMPTY</code> can be written in two ways:</p> <div class="language- extra-class"><pre class="language-text"><code>attribute IS NOT EMPTY
NOT attribute IS EMPTY
</code></pre></div><p>Both forms are equivalent. They select the documents for which the attribute is not empty.</p> <p>Here is the list of JSON values that are considered empty:</p> <ul><li><code>&quot;&quot;</code></li> <li><code>[]</code></li> <li><code>{}</code></li></ul> <p>For example, with the documents:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>Then the filter <code>colour IS EMPTY</code> selects the document ids <code>[0,2,3]</code> while the filter <code>colour IS NOT EMPTY</code> or <code>NOT colour IS EMPTY</code> selects the document ids <code>[1,4]</code>.</p> <h6 id="_3-1-2-1-13-is-null"><a href="#_3-1-2-1-13-is-null" class="header-anchor">#</a> 3.1.2.1.13 IS NULL</h6> <p>The <code>IS NULL</code> operator selects the documents for which the filterable attribute exists and is <code>null</code>. If the attribute doesn't exists then it is not <code>null</code> and the document will not be returned. It is a postfix operator that takes an attribute name as argument.</p> <p>The negated form of <code>IS NULL</code> can be written in two ways:</p> <div class="language- extra-class"><pre class="language-text"><code>attribute IS NOT NULL
NOT attribute IS NULL
</code></pre></div><p>Both forms are equivalent. They select the documents for which the attribute is not <code>null</code>.</p> <p>For example, with the documents:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;colour&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>Then the filter <code>colour IS NULL</code> selects the document ids <code>[1]</code> while the filter <code>colour IS NOT NULL</code> or <code>NOT colour IS NULL</code> selects the document ids <code>[0,2,3,4]</code>.</p> <h5 id="_3-1-2-2-array-syntax"><a href="#_3-1-2-2-array-syntax" class="header-anchor">#</a> 3.1.2.2. Array Syntax</h5> <p>The array syntax is an alternative way to combine different filters with <code>OR</code> and <code>AND</code> operators.</p> <ul><li>Elements in the outer array are connected by <code>AND</code> operators</li> <li>Elements in the inner arrays are connected by <code>OR</code> operators</li></ul> <p>Example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;genres = Comedy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;genres = Romance&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;director = 'Mati Diop'&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>is equivalent to:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(genres = Comedy OR genres = Romance) AND (director = 'Mati Diop')&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-1-3-sort"><a href="#_3-1-3-sort" class="header-anchor">#</a> 3.1.3. <code>sort</code></h4> <ul><li>Type: Array of String (POST) | String (GET)</li> <li>Required: False</li> <li>Default: <code>[]|null</code></li></ul> <p><code>sort</code> contains a sort expression written as a string or an array of strings. It sorts the search results at query time according to the specified attributes and indicated order.</p> <p>Attributes used as sort criteria must be added to the `sortableAttributes list of an index settings. See <a href="/specifications/text/0123-sortable-attributes-setting-api.html">Sortable Attributes Setting API</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>Array of String</code>(POST), <code>String</code>(GET) or <code>null</code> for <code>sort</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_sort">invalid_search_sort</a> error.</li> <li>🔴 Sending an invalid syntax for <code>sort</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_sort">invalid_search_sort</a> error.</li> <li>🔴 Sending a field not defined as a <code>sortableAttributes</code> for <code>sort</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_sort">invalid_search_sort</a> error.</li></ul> <blockquote><p>See <a href="/specifications/text/0055-sort.html">Sort</a></p></blockquote> <h4 id="_3-1-4-facets"><a href="#_3-1-4-facets" class="header-anchor">#</a> 3.1.4. <code>facets</code></h4> <ul><li>Type: Array of String (POST) | String (GET)</li> <li>Required: False</li> <li>Default: <code>[]|null</code></li></ul> <p><code>facets</code> permits to specify facets to be computed for the current search query.</p> <p>It returns the number of documents matching the current search query for each specified facet.</p> <p>This parameter can take two values:</p> <ul><li>An array of attributes: <code>facets=[&quot;attributeA&quot;, &quot;attributeB&quot;, …]</code></li> <li>A wildcard <code>&quot;*&quot;</code> — this returns a count for all facets present in <code>filterableAttributes</code></li></ul> <p>Attributes used in <code>facets</code> must be added to the <code>filterableAttributes</code> list of an index settings. See <a href="/specifications/text/0123-filterable-attributes-setting-api.html">Filterable Attributes Setting API</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>Array of String</code>(POST), <code>String</code>(GET) or <code>null</code> for <code>facets</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_facets">invalid_search_facets</a> error.</li> <li>🔴 Sending a field not defined as a <code>filterableAttributes</code> for <code>facets</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_facets">invalid_search_facets</a> error.</li></ul> <p>The distribution of the different facets is returned in the <code>facetDistribution</code> response parameter.</p> <p>Statistics are computed and returned within the <code>facetStats</code> object for distributed facets. See <a href="#3210-facetstats"><code>facetStats</code></a> section.</p> <h4 id="_3-1-5-limit"><a href="#_3-1-5-limit" class="header-anchor">#</a> 3.1.5. <code>limit</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>20</code></li></ul> <p>Sets the maximum number of documents to be returned for the search query.</p> <p>If in addition to either <code>page</code> and/or <code>hitsPerPage</code>, <code>limit</code> and/or <code>offset</code> are provided as well, <code>limit</code> and <code>offset</code> are ignored. See <a href="#3181-navigating-search-results-by-page-selection">explaination</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>limit</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_limit">invalid_search_limit</a> error.</li></ul> <h4 id="_3-1-6-offset"><a href="#_3-1-6-offset" class="header-anchor">#</a> 3.1.6. <code>offset</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>0</code></li></ul> <p>Sets the starting point in the search results, effectively skipping over a given number of documents.</p> <p>If in addition to either <code>page</code> and/or <code>hitsPerPage</code>, <code>limit</code> and/or <code>offset</code> are provided as well, <code>limit</code> and <code>offset</code> are ignored. See <a href="#3181-navigating-search-results-by-page-selection">details</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>offset</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_offset">invalid_search_offset</a> error.</li></ul> <h4 id="_3-1-7-page"><a href="#_3-1-7-page" class="header-anchor">#</a> 3.1.7. <code>page</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>null</code></li></ul> <p>Sets the specific results page to fetch.</p> <p>By default, page is <code>null</code>, or <code>1</code> if <code>hitsPerPage</code> is provided.
The first page has a value of <code>1</code>, the second <code>2</code>, etc... When <code>0</code> is provided as a value, no hits are returned.</p> <p>When providing <code>page</code> or <code>hitsPerPage</code> in the query parameters, the <code>page selection</code> system is enabled, which makes it possible to navigate through the search results pages. See explanation on the <a href="#3181-navigating-search-results-by-page-selection"><code>page selection</code></a>.</p> <p>If in addition to either <code>page</code> and/or <code>hitsPerPage</code>, <code>limit</code> and/or <code>offset</code> are provided as well, <code>limit</code> and <code>offset</code> are ignored. See <a href="#3181-navigating-search-results-by-page-selection">explanation</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>page</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_page">invalid_search_page</a> error.</li></ul> <h4 id="_3-1-8-hitsperpage"><a href="#_3-1-8-hitsperpage" class="header-anchor">#</a> 3.1.8. <code>hitsPerPage</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>null</code></li></ul> <p>Sets the number of results returned for a query.</p> <p>By default, <code>hitsPerPage</code> is <code>null</code>, or <code>20</code> if <code>page</code> is provided. When <code>0</code> is provided as a value, no hits are returned.</p> <p>When providing <code>page</code> or <code>hitsPerPage</code> in the query parameters, the <code>page selection</code> system is enabled, which makes it possible to navigate through the search results pages. See explanation on the <a href="#3181-navigating-search-results-by-page-selection"><code>page selection</code></a>.</p> <p>If in addition to either <code>page</code> and/or <code>hitsPerPage</code>, <code>limit</code> and/or <code>offset</code> are provided as well, <code>limit</code> and <code>offset</code> are ignored. See <a href="#3181-navigating-search-results-by-page-selection">explaination</a>.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>hitsPerPage</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_hits_per_page">invalid_search_hits_per_page</a> error.</li></ul> <h4 id="_3-1-8-1-navigating-search-results-by-page-selection"><a href="#_3-1-8-1-navigating-search-results-by-page-selection" class="header-anchor">#</a> 3.1.8.1. Navigating search results by page selection</h4> <p>By default, <code>limit</code> and <code>offset</code> are used to navigate search results. While being performant, it lacks exhaustiveness to create a seamless page selection navigation. Upon using <code>limit</code>/<code>offset</code>, <code>estimatedTotalHits</code> is returned, which provides a rough estimation of how many hits may be candidates for a given request. See <a href="#31811-limitoffset-usage"><code>limit</code>/<code>offset</code> usage</a> for further explanation.</p> <p>The <code>page selection</code> system provides an alternative that tackles the above-mentioned issue when reliable information is needed to navigate results with a page selector. e.g. A page selector component <code>&lt;&lt; &lt; 1, 2, 3, ...14 &gt; &gt;&gt;</code>. Nonetheless, it's considered less performant on a larger number of results as the engine needs to compute the <code>totalHits</code> exhaustively.
With this page selection system, it is possible to jump from one page to another using the <code>page</code> parameter and decide how many results should be returned per page with the <code>hitsPerPage</code> parameter. See <a href="#31812-pagehitsperpage-usage"><code>page</code>/<code>hitsPerPage</code> usage</a> for further explanation.</p> <h5 id="_3-1-8-1-1-limit-offset-usage"><a href="#_3-1-8-1-1-limit-offset-usage" class="header-anchor">#</a> 3.1.8.1.1. Limit/offset usage</h5> <p>When either <code>limit</code> or <code>offset</code> is specified or when neither <code>limit</code>, <code>offset</code>, <code>page</code> and <code>hitsPerPage</code> are specified, the response object contains the related fields:</p> <ul><li><a href="#324-estimatedtotalhits"><code>estimatedTotalHits</code></a></li> <li><a href="#322-limit"><code>limit</code></a></li> <li><a href="#323-offset"><code>offset</code></a></li></ul> <p>If in addition to <code>limit</code> and/or <code>offset</code>, either <code>page</code> or <code>hitsPerPage</code> is also provided, <code>limit</code> and <code>offset</code> parameters are ignored.</p> <p>For example, given the following query parameters:</p> <ul><li>limit: 10</li> <li>offset: 1</li></ul> <p>The response objects contain these specific fields:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">/// ... 10 hits</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/// ... other fields</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;estimatedTotalHits&quot;</span><span class="token operator">:</span> <span class="token number">1345</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For example, on a query with no query parameters:</p> <p>The response objects contain these specific fields:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">/// ... 10 hits</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/// ... other fields</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;estimatedTotalHits&quot;</span><span class="token operator">:</span> <span class="token number">1345</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_3-1-8-1-2-page-hitsperpage-usage"><a href="#_3-1-8-1-2-page-hitsperpage-usage" class="header-anchor">#</a> 3.1.8.1.2 page/hitsPerPage usage</h5> <p>As soon as either <code>page</code> or <code>hitsPerPage</code> is used as a query parameter, in the response object, <code>limit</code>, <code>offset</code>, and <code>estimatedTotalHits</code> are removed and page selection related fields are returned:</p> <ul><li><a href="#326-hitsperpage"><code>hitsPerPage</code></a>: number of results per page.</li> <li><a href="#325-page"><code>page</code></a>: current search results page. The counting starts at <code>1</code>.</li> <li><a href="#327-totalpages"><code>totalPages</code></a>: total number of results pages. Calculated using <code>hitsPerPage</code> value.</li> <li><a href="#328-totalhits"><code>totalHits</code></a>: total number of search results.</li></ul> <p>Both <code>totalPages</code> and <code>totalHits</code> are computed until they reach the <a href="/specifications/text/0118-search-api.html#https://github.com/meilisearch/specifications/blob/main/text/157-pagination-setting-api.md#311-maxtotalhits"><code>pagination.maxTotalHits</code></a> number from the settings.</p> <p>If in addition to either <code>page</code> and/or <code>hitsPerPage</code>, <code>limit</code> and/or <code>offset</code> are provided as well, <code>limit</code> and <code>offset</code> are ignored.</p> <p>For example, given the following query parameters:</p> <ul><li>page: 2</li> <li>hitsPerPage: 10</li></ul> <p>The response objects contain these specific fields:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">/// ... 10 hits</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/// ... other fields</span>
    <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hitsPerPage&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalHits&quot;</span><span class="token operator">:</span> <span class="token number">2100</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalPages&quot;</span><span class="token operator">:</span> <span class="token number">210</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For example, given the following query parameters:</p> <ul><li>page: 2</li> <li>hitsPerPage: 10</li> <li>limit: 1</li></ul> <p>The response objects contain these specific fields:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">/// ... 10 hits</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/// ... other fields</span>
    <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hitsPerPage&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalHits&quot;</span><span class="token operator">:</span> <span class="token number">2100</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalPages&quot;</span><span class="token operator">:</span> <span class="token number">210</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For example, given the following query parameters:</p> <ul><li>page: 0</li> <li>hitsPerPage: 10</li></ul> <p>The response objects contain these specific fields:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/// ... other fields</span>
    <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hitsPerPage&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalHits&quot;</span><span class="token operator">:</span> <span class="token number">2100</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalPages&quot;</span><span class="token operator">:</span> <span class="token number">210</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-1-9-attributestoretrieve"><a href="#_3-1-9-attributestoretrieve" class="header-anchor">#</a> 3.1.9. <code>attributesToRetrieve</code></h4> <ul><li>Type: Array of String (POST) | String (GET)</li> <li>Required: False</li> <li>Default: <code>[&quot;*&quot;]</code>, meaning all the attributes</li></ul> <p>Configures which attributes will be retrieved in the returned documents.</p> <p>If no value is specified, the default value of <code>attributesToRetrieve</code> is used (<code>[&quot;*&quot;]</code>). This corresponds to the <code>displayedAttributes</code> index setting, which by default contains all attributes found in the documents.</p> <blockquote><p>If an attribute is missing from <code>displayedAttributes</code> index setting, <code>attributesToRetrieve</code> silently ignore it, and the field doesn't appear in the returned search results.</p></blockquote> <ul><li>🔴 Sending a value with a different type than <code>Array of String</code>(POST), <code>String</code>(GET) or <code>null</code> for <code>attributesToRetrieve</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_attributes_to_retrieve">invalid_search_attributes_to_retrieve</a> error.</li></ul> <h4 id="_3-1-10-attributestohighlight"><a href="#_3-1-10-attributestohighlight" class="header-anchor">#</a> 3.1.10. <code>attributesToHighlight</code></h4> <ul><li>Type: Array of String (POST) | String(GET)</li> <li>Required: False</li> <li>Default: <code>[]|null</code></li></ul> <p>Configures which fields may have highlighted parts, given that they match the requested query terms (i.e. the terms in the <a href="#311-q"><code>q</code></a> search parameter). Pre/post highlighting tags are applied around each word corresponding to a query term.</p> <p>If <code>attributesToHighlight</code> is present in the search query, the search results will include a <code>_formatted</code> object containing the attributes and their highlighted parts. For more detailed regarding the <code>_formatted</code> behavior, see the <a href="#32112-formatted">3.2.1.1.2. <code>_formatted</code></a> section.</p> <p>If <code>&quot;*&quot;</code> is provided as a value (<code>attributesToHighlight=[&quot;*&quot;]</code>), all the attributes present in <code>displayedAttributes</code> setting will be highlighted.</p> <p>Highlighted parts are surrounded by the <a href="3111-highlightpretag"><code>highlightPreTag</code></a> and <a href="#3112-highlightposttag"><code>highlightPostTag</code></a> parameters.</p> <p><code>attributesToHighlight</code> only works on values of the following types: <code>string</code>, <code>number</code>, <code>array</code>, <code>object</code>. When highlighted, number attributes are transformed to string.</p> <ul><li>🔴 Sending a value with a different type than <code>Array[String]</code>(POST), <code>String</code>(GET) or <code>null</code> for <code>attributesToHighlight</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_attributes_to_highlight">invalid_search_attributes_to_highlight</a> error.</li></ul> <h5 id="_3-1-10-1-searchableattributes"><a href="#_3-1-10-1-searchableattributes" class="header-anchor">#</a> 3.1.10.1. searchableAttributes</h5> <p>Attributes not defined in the <code>searchableAttributes</code> index setting are also highlighted if assigned to <code>attributesToHighlight</code>.</p> <h5 id="_3-1-10-2-stopwords"><a href="#_3-1-10-2-stopwords" class="header-anchor">#</a> 3.1.10.2. stopWords</h5> <p>Attributes defined in the <code>stopWords</code> index setting are also highlighted if matched.</p> <h5 id="_3-1-10-3-tokenizer-separators"><a href="#_3-1-10-3-tokenizer-separators" class="header-anchor">#</a> 3.1.10.3. Tokenizer Separators</h5> <p>Tokenizer separators are not highlighted.</p> <h5 id="_3-1-10-4-synonyms"><a href="#_3-1-10-4-synonyms" class="header-anchor">#</a> 3.1.10.4. synonyms</h5> <p>Synonyms are also highlighted.</p> <h4 id="_3-1-11-highlightpretag"><a href="#_3-1-11-highlightpretag" class="header-anchor">#</a> 3.1.11. <code>highlightPreTag</code></h4> <ul><li>Type: String</li> <li>Required: False</li> <li>Default: <code>&quot;&lt;em&gt;&quot;</code></li></ul> <p>Specifies the string to put <strong>before</strong> every highlighted query terms.</p> <p>This parameter is applied to the fields configured in <code>attributesToHighlight</code>. If there are none, this parameter has no effect. See <a href="3110-attributestohighlight">3.1.10. <code>attributesToHighlight</code></a> section.</p> <ul><li>🔴 Sending a value with a different type than <code>String</code> for <code>highlightPreTag</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_highlight_pre_tag">invalid_search_highlight_pre_tag</a> error.</li></ul> <p>If <code>attributesToHighlight</code> is omitted while <code>highlightPreTag</code> is specified, there is no error.</p> <h4 id="_3-1-12-highlightposttag"><a href="#_3-1-12-highlightposttag" class="header-anchor">#</a> 3.1.12. <code>highlightPostTag</code></h4> <ul><li>Type: String</li> <li>Required: False</li> <li>Default: <code>&quot;&lt;/em&gt;&quot;</code></li></ul> <p>Specifies the string to put <strong>after</strong> the highlighted query terms.</p> <p>This parameter is applied to the fields from <code>attributesToHighlight</code>. If there are none, this parameter has no effect. See <a href="3110-attributestohighlight">3.1.10. <code>attributesToHighlight</code></a> section.</p> <ul><li>🔴 Sending a value with a different type than <code>String</code> for <code>highlightPostTag</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_highlight_post_tag">invalid_search_highlight_post_tag</a> error.</li></ul> <p>If <code>attributesToHighlight</code> is omitted while <code>highlightPostTag</code> is specified, there is no error.</p> <h4 id="_3-1-13-attributestocrop"><a href="#_3-1-13-attributestocrop" class="header-anchor">#</a> 3.1.13. <code>attributesToCrop</code></h4> <ul><li>Type: Array[String]|String</li> <li>Required: False</li> <li>Default: <code>[]|null</code></li></ul> <p>Defines document attributes to be cropped. Cropped attributes have their values shortened around query terms.</p> <p>If <code>attributesToCrop</code> is present in the search query, the search results will include a <code>_formatted</code> object containing the attributes and their cropped parts. For more detailed regarding the <code>_formatted</code> behavior, see the <a href="#32112-formatted">3.2.1.1.2. <code>_formatted</code></a> section.</p> <p>If <code>&quot;*&quot;</code> is provided as a value (<code>attributesToCrop=[&quot;*&quot;]</code>), all the attributes present in <code>displayedAttributes</code> setting will be cropped.</p> <p>The number of words contained in the cropped value is defined by the <code>cropLength</code> parameter. See <a href="#3114-croplength">3.1.1.14. <code>cropLength</code></a> section.</p> <p>The value of <code>cropLength</code> can be customized per attribute. See <a href="#31121-custom-croplength-defined-per-attribute">3.1.12.1. Custom <code>cropLength</code> Defined Per Cropped Attribute</a> section.</p> <p>The engine adds a marker by default in front of and/or behind the part selected by the cropper. This marker is customizable. See <a href="#3115-cropmarker">3.1.13. <code>cropMarker</code></a> section.</p> <ul><li>🔴 Sending a value with a different type than <code>Array[String]</code>(POST), <code>String</code>(GET) or <code>null</code> for <code>attributesToCrop</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_attributes_to_crop">invalid_search_attributes_to_crop</a> error.</li></ul> <h5 id="_3-1-13-2-searchableattributes"><a href="#_3-1-13-2-searchableattributes" class="header-anchor">#</a> 3.1.13.2. searchableAttributes</h5> <p>Attributes configured in <code>attributesToCrop</code> are cropped even if not present in the <code>searchableAttributes</code> index setting.</p> <h5 id="_3-1-13-3-stopwords"><a href="#_3-1-13-3-stopwords" class="header-anchor">#</a> 3.1.13.3. stopWords</h5> <p>Terms defined in the <code>stopWords</code> index setting are counted as words regarding <code>cropLength</code>.</p> <h5 id="_3-1-13-3-tokenizer-separators"><a href="#_3-1-13-3-tokenizer-separators" class="header-anchor">#</a> 3.1.13.3. Tokenizer Separators</h5> <p>Tokenizer separators aren't counted as words regarding <code>cropLength</code>.</p> <h4 id="_3-1-14-croplength"><a href="#_3-1-14-croplength" class="header-anchor">#</a> 3.1.14. <code>cropLength</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li> <li>Default: <code>10</code></li></ul> <p>Sets the total number of <strong>words</strong> to keep for the cropped part of an attribute specified in the <code>attributesToCrop</code> parameter. It means that if <code>10</code> is set for <code>cropLength</code>, the cropped part returned in <code>_formatted</code> will only be 10 words long.</p> <p>This parameter is applied to the fields from <code>attributesToCrop</code>. If there are none, this parameter has no effect. See <a href="#3113-attributestocrop">3.1.13. <code>attributesToCrop</code></a> section.</p> <p>Sending a <code>0</code> value deactivates the cropping unless a custom crop length is defined for an attribute inside <code>attributesToCrop</code>.</p> <ul><li>🔴 Sending a value with a different type than <code>Integer</code> for <code>cropLength</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_crop_length">invalid_search_crop_length</a> error.</li></ul> <h5 id="_3-1-14-1-custom-croplength-defined-per-attribute"><a href="#_3-1-14-1-custom-croplength-defined-per-attribute" class="header-anchor">#</a> 3.1.14.1. Custom <code>cropLength</code> Defined Per Attribute.</h5> <p>Optionally, indicating a custom crop length for any of the listed attributes is possible:</p> <p><code>&quot;attributesToCrop&quot;:[&quot;attributeNameA:15&quot;, &quot;attributeNameB:30&quot;]</code></p> <p>A custom crop length set in this way has priority over the <code>cropLength</code> parameter.</p> <h5 id="_3-1-14-2-examples"><a href="#_3-1-14-2-examples" class="header-anchor">#</a> 3.1.14.2 Examples</h5> <h6 id="_3-1-14-1-1-extending-around"><a href="#_3-1-14-1-1-extending-around" class="header-anchor">#</a> 3.1.14.1.1. Extending around</h6> <p>Given an attribute defined in <code>attributesToCrop</code> containing:</p> <p><code>&quot;In his ravenous hatred he found no peace, and with boiling blood he scoured the umbral plains, seeking vengence afgainst the dark lords who had robbed him.&quot;</code></p> <p>With <code>croplength</code> defined as <code>5</code> and <code>q</code> defined as <code>boiling blood</code>, the cropped value will be:</p> <p><code>&quot;…and with boiling blood he…&quot;</code></p> <p>Cropped query terms are counted as a word regarding <code>cropLength</code>.</p> <p>Sending more query terms than the <code>cropLength</code> value has no impact. The cropped part will contain the <code>cropLength</code> number.</p> <h6 id="_3-1-14-1-2-keeping-a-phrase-context"><a href="#_3-1-14-1-2-keeping-a-phrase-context" class="header-anchor">#</a> 3.1.14.1.2. Keeping a phrase context</h6> <p>After Meilisearch has chosen the best possible match window (some number of words &lt; <code>cropLength</code>), it will add words from before or after the match window until the total number is equal to <code>cropLength</code>. In doing so, it will attempt to add context to the match window by choosing words from the same sentence(s) where the match window occurs.</p> <p>For instance, for the matching word <code>Split</code> the text:</p> <p><code>&quot;Natalie risk her future. Split The World is a book written by Emily Henry. I never read it.&quot;</code></p> <p>will be cropped like:</p> <p><code>…Split The World is a book written by Emily Henry…</code></p> <p>and not like:</p> <p><code>Natalie risk her future. Split The World is a book…</code></p> <h4 id="_3-1-15-cropmarker"><a href="#_3-1-15-cropmarker" class="header-anchor">#</a> 3.1.15. <code>cropMarker</code></h4> <ul><li>Type: String</li> <li>Required: False</li> <li>Default: <code>&quot;…&quot;</code> (U+2026)</li></ul> <p>Sets which string to add before and/or after the cropped text. See <a href="#3113-attributestocrop">3.1.13. <code>attributesToCrop</code></a> section.</p> <p>The specified crop marker is applied by following rules outline in section <a href="#3115-cropmarker">3.1.15.1. Applying <code>cropMarker</code></a>.</p> <p>Specifying <code>cropMarker</code> to <code>&quot;&quot;</code> or <code>null</code> implies that no marker will be applied to the cropped part.</p> <p>This parameter is applied to the fields configured in <code>attributesToCrop</code>. If there are none, this parameter has no effect. See <a href="#3113-attributestocrop">3.1.13. <code>attributesToCrop</code></a> section.</p> <ul><li>🔴 Sending a value with a different type than <code>String</code> or <code>null</code> for <code>cropMarker</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_crop_marker">invalid_search_crop_marker</a> error.</li></ul> <h5 id="_3-1-15-1-applying-cropmarker"><a href="#_3-1-15-1-applying-cropmarker" class="header-anchor">#</a> 3.1.15.1. Applying <code>cropMarker</code></h5> <h6 id="_3-1-15-1-1-matched-part-to-be-cropped"><a href="#_3-1-15-1-1-matched-part-to-be-cropped" class="header-anchor">#</a> 3.1.15.1.1. Matched Part To Be Cropped</h6> <p>The cropping algorithm tries to match the window with the highest density of query terms within the <code>cropLength</code> limit.</p> <p>The cropping algorithm tries to find the crop window that contains the most relevant matches.</p> <ol><li>That has the highest count of unique matches</li></ol> <p>For example, for the query terms <code>split the world</code>, then the interval <code>the split the split the</code> has <code>5</code> matches but only <code>2</code> unique matches (<code>1</code> for <code>split</code> and <code>1</code> for <code>the</code>) where the interval <code>split of the world</code> has <code>3</code> matches and <code>3</code> unique matches. So the interval <code>split of the world</code> is considered better.</p> <ol start="2"><li>That have the minimum distance between matches</li></ol> <p>For example, for the query terms <code>split the world</code>, then the interval <code>split of the world</code> has a distance of <code>3</code> (<code>2</code> between <code>split</code> and <code>the</code>, and <code>1</code> between <code>the</code> and <code>world</code>) where the interval <code>split the world</code> has a distance of <code>2</code>. So the interval <code>split the world</code> is considered better.</p> <ol start="3"><li>That have the highest count of ordered matches</li></ol> <p>For example, for the query terms <code>split the world</code>, then the interval <code>the world split</code> has <code>2</code> ordered words where the interval <code>split the world</code> has <code>3</code>. So the interval <code>split the world</code> is considered better.</p> <p>Only one cropped part from an attribute is returned.</p> <p>If no part is found when selecting a part to be cropped, the returned value in <code>_formatted</code> will start at the beginning of the attribute and include a number of words equal to <code>cropLength</code>.</p> <h6 id="_3-1-15-1-2-positioning-markers"><a href="#_3-1-15-1-2-positioning-markers" class="header-anchor">#</a> 3.1.15.1.2. Positioning Markers</h6> <p>If the cropped part has been matched against query terms and contains the beginning of the attribute to be cropped, the <code>cropMarker</code> is not placed to the left of the cropped part.</p> <p>If the cropped part has been matched against query terms and contains the end of the attribute to be cropped, the <code>cropMarker</code> is not placed to the right of the cropped part.</p> <h4 id="_3-1-16-showmatchesposition"><a href="#_3-1-16-showmatchesposition" class="header-anchor">#</a> 3.1.16. <code>showMatchesPosition</code></h4> <ul><li>Type: Boolean</li> <li>Required: False</li> <li>Default: <code>false</code></li></ul> <p>Adds a <code>_matchesPosition</code> object to the search response that contains the location of each occurrence of queried terms across all fields. The given positions are in bytes.</p> <p>It's useful when more control is needed than offered by the built-in highlighting/cropping features.</p> <ul><li>🔴 Sending a value with a different type than <code>Boolean</code> or <code>null</code> for <code>showMatchesPosition</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_show_matches_position">invalid_search_show_matches_position</a> error.</li></ul> <h4 id="_3-1-17-showrankingscore"><a href="#_3-1-17-showrankingscore" class="header-anchor">#</a> 3.1.17. <code>showRankingScore</code></h4> <ul><li>Type: Boolean</li> <li>Required: False</li> <li>Default: <code>false</code></li></ul> <p>Adds a <a href="#32114-rankingscore"><code>_rankingScore</code></a> number to each document in the search response, representing the relevancy score of a document according to the applied ranking rules and relative to a search query. Higher is better.</p> <p><code>1.0</code> indicates a perfect match, <code>0.0</code> no match at all (Meilisearch should not return documents that don't match the query).</p> <ul><li>🔴 Sending a value with a different type than <code>Boolean</code> or <code>null</code> for <code>showRankingScore</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_show_ranking_score">invalid_search_ranking_score</a> error.</li></ul> <h4 id="_3-1-18-showrankingscoredetails"><a href="#_3-1-18-showrankingscoredetails" class="header-anchor">#</a> 3.1.18. <code>showRankingScoreDetails</code></h4> <ul><li>Type: Object</li> <li>Required: False</li> <li>Default: <code>false</code></li></ul> <p>Adds a <a href="#32115-rankingscoredetails"><code>_rankingScoreDetails</code></a> object to each document in the search response, containing information about the score of that document for each applied ranking rule.</p> <ul><li>🔴 Sending a value with a different type than <code>Boolean</code> or <code>null</code> for <code>showRankingScoreDetails</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_show_ranking_score_details">invalid_search_ranking_score_details</a> error.</li></ul> <h4 id="_3-1-19-matchingstrategy"><a href="#_3-1-19-matchingstrategy" class="header-anchor">#</a> 3.1.19. <code>matchingStrategy</code></h4> <ul><li>Type: String</li> <li>Required: False</li> <li>Default: <code>last</code></li></ul> <p>Defines which strategy to use to match the query terms within the documents as search results.</p> <p>Two different strategies are available, <code>last</code> and <code>all</code>. By default, the <code>last</code> strategy is chosen.</p> <ul><li>🔴 Sending a value with a different type than <code>String</code> and other than <code>last</code> or <code>all</code> as a value for <code>matchingStrategy</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_matching_strategy">invalid_search_matching_strategy</a> error.</li></ul> <h5 id="_3-1-19-1-last-strategy"><a href="#_3-1-19-1-last-strategy" class="header-anchor">#</a> 3.1.19.1. <code>last</code> strategy</h5> <p>The documents containing ALL the query words (i.e. in the <code>q</code> parameter) are returned first by Meilisearch. If Meilisearch doesn't have enough documents to fit the requested <code>limit</code>, it iteratively ignores the query words from the last typed word to the first typed word to match more documents.</p> <h5 id="_3-1-19-2-all-strategy"><a href="#_3-1-19-2-all-strategy" class="header-anchor">#</a> 3.1.19.2. <code>all</code> strategy</h5> <p>Only the documents containing ALL the query words (i.e. in the <code>q</code> parameter) are returned by Meilisearch. If Meilisearch doesn't have enough documents to fit the requested <code>limit</code>, it returns the documents found without trying to match more documents.</p> <h4 id="_3-1-20-attributestosearchon"><a href="#_3-1-20-attributestosearchon" class="header-anchor">#</a> 3.1.20. <code>attributesToSearchOn</code></h4> <ul><li>Type: Array of String (POST) | String (GET)</li> <li>Required: False</li> <li>Default: <code>[&quot;*&quot;]</code></li></ul> <p>Defines which <code>searchableAttributes</code> the query will search on.</p> <ul><li>If <code>attributesToSearchOn</code> is not set, set to <code>[&quot;*&quot;]</code> or set to <code>null</code>, then the query will search on all <code>searchableAttributes</code>.</li> <li>Sending the attributes in a different order than the order set in the settings <code>searchableAttributes</code> doesn't reorder the fields' rank for the <code>Attributes</code> ranking rule</li> <li>🔴 Sending a value with a different type than <code>Array of String</code>(POST), <code>String</code>(GET) or <code>null</code> for <code>attributesToSearchOn</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_attributes_to_search_on">invalid_attributes_to_search_on</a> error.</li> <li>🔴 Sending an attribute that is not part of the settings <code>searchableAttributes</code> list returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_attributes_to_search_on">invalid_attributes_to_search_on</a> error.</li></ul> <h4 id="_3-1-21-vector-experimental"><a href="#_3-1-21-vector-experimental" class="header-anchor">#</a> 3.1.21. <code>vector</code> <code>EXPERIMENTAL</code></h4> <ul><li>Type: Array of Float</li> <li>Required: False</li> <li>Default: []</li></ul> <p>Request the nearest documents based on the query vector embedding given.</p> <ul><li>🔴 Sending a value with a different type than <code>Array of Float</code> or <code>null</code> as a value for <code>vector</code> returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_vector">invalid_search_vector</a> error.</li> <li>🔴 Sending a value for <code>vector</code> whose length differs from the documents <code>_vectors</code> length returns an <a href="/specifications/text/0061-error-format-and-definitions.html#invalid_search_vector">invalid_search_vector</a> error.</li></ul> <h3 id="_3-2-search-response-properties"><a href="#_3-2-search-response-properties" class="header-anchor">#</a> 3.2. Search Response Properties</h3> <table><thead><tr><th>Field</th> <th>Type</th> <th>Required</th></tr></thead> <tbody><tr><td><a href="#321-hits"><code>hits</code></a></td> <td>Array[Hit]</td> <td>True</td></tr> <tr><td><a href="#322-limit"><code>limit</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#323-offset"><code>offset</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#324-estimatedTotalHits"><code>estimatedTotalHits</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#325-page"><code>page</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#326-hitsperpage"><code>hitsPerPage</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#327-totalpages"><code>totalPages</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#328-totalhits"><code>totalHits</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#329-facetdistribution"><code>facetDistribution</code></a></td> <td>Object</td> <td>False</td></tr> <tr><td><a href="#3210-facetstats"><code>facetStats</code></a></td> <td>Object</td> <td>False</td></tr> <tr><td><a href="#3211-processingtimems"><code>processingTimeMs</code></a></td> <td>Integer</td> <td>True</td></tr> <tr><td><a href="#3212-query"><code>query</code></a></td> <td>String</td> <td>True</td></tr> <tr><td><a href="#3213-vector"><code>vector</code></a> <code>EXPERIMENTAL</code></td> <td>Array of Float</td> <td>False</td></tr></tbody></table> <h4 id="_3-2-1-hits"><a href="#_3-2-1-hits" class="header-anchor">#</a> 3.2.1. <code>hits</code></h4> <ul><li>Type: Array[Hit]</li> <li>Required: True</li></ul> <p>Results of the search query as an array of documents.</p> <blockquote><p>Hit object represents a matched document as a search result.</p></blockquote> <blockquote><p>The search parameters <code>attributesToRetrieve</code> influence the returned payload for a hit. See <a href="#319-attributestoretrieve">3.1.7. <code>attributesToRetrieve</code></a> section.</p></blockquote> <p>A search result can contain special properties. See <a href="#3211-hit-special-properties">3.2.1.1. <code>hit</code> Special Properties</a> section.</p> <h5 id="_3-2-1-1-hit-special-properties"><a href="#_3-2-1-1-hit-special-properties" class="header-anchor">#</a> 3.2.1.1. <code>hit</code> Special Properties</h5> <table><thead><tr><th>Field</th> <th>Type</th> <th>Required</th></tr></thead> <tbody><tr><td><a href="#32111-geodistance"><code>_geoDistance</code></a></td> <td>Integer</td> <td>False</td></tr> <tr><td><a href="#32112-formatted"><code>_formatted</code></a></td> <td>Object</td> <td>False</td></tr> <tr><td><a href="#32113-matchesposition"><code>_matchesPosition</code></a></td> <td>Object</td> <td>False</td></tr> <tr><td><a href="#32114-rankingscore"><code>_rankingScore</code></a></td> <td>Number</td> <td>False</td></tr> <tr><td><a href="#32115-rankingscoredetails"><code>_rankingScoreDetails</code></a></td> <td>Object</td> <td>False</td></tr> <tr><td><a href="#32116-semanticscore"><code>_semanticScore</code></a> <code>EXPERIMENTAL</code></td> <td>Float</td> <td>False</td></tr></tbody></table> <h6 id="_3-2-1-1-1-geodistance"><a href="#_3-2-1-1-1-geodistance" class="header-anchor">#</a> 3.2.1.1.1. <code>_geoDistance</code></h6> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Search queries using <code>_geoPoint</code> returns a <code>_geoDistance</code> field containing the distance in meters between the document <code>_geo</code> coordinates and the specified <code>_geoPoint</code>.</p> <blockquote><p>See <a href="/specifications/text/0059-geo-search.html">GeoSearch</a></p></blockquote> <h6 id="_3-2-1-1-2-formatted"><a href="#_3-2-1-1-2-formatted" class="header-anchor">#</a> 3.2.1.1.2. <code>_formatted</code></h6> <ul><li>Type: Object</li> <li>Required: False</li></ul> <p><code>_formatted</code> is an object returned in the search response, only if at least one of the following paramaters has been set in the search query:</p> <ul><li><code>attributesToHighlight</code></li> <li><code>attributesToCrop</code></li></ul> <p>If <code>attributesToHighlight</code> and <code>attributesToCrop</code> are not set, <code>_formatted</code> is not returned.</p> <p>This <code>_formatted</code> object will be present in each returned document in the <code>hits</code> field.</p> <p>Example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;attributesToCrop&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Pride and Prejudice&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;_formatted&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Pride and Prejudice&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">456</span><span class="token punctuation">,</span>
            <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Le Petit Prince&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;_formatted&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Le Petit Prince&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>Which attributes are present in <code>_formatted</code>?</p> <p><em>Remember the main rule: <code>_formatted</code> is only present if <code>attributesToHighlight</code> or <code>attributesToCrop</code> is set.</em></p> <p>The <code>_formatted</code> object contains attributes coming from the original document, depending on the parameters the users set during the search query. Indeed, <strong><code>_formatted</code> contains all the attributes present in <code>attributesToRetrieve</code>, <code>attributesToHighlight</code>, and <code>attributesToCrop</code> combined</strong>.</p> <p>Knowing the default value of <code>attributesToRetrieve</code> is <code>[&quot;*&quot;]</code> (so all the attributes present in <code>displayedAttributes</code>), if no <code>attributesToRetrieve</code> are set in the search query, <code>_formatted</code> will return all the <code>displayedAttributes</code>.</p> <p>Returning attributes in the <code>_formatted</code> object does not mean these attributes will be necessarily highlighted or cropped, see the next point.</p> <p>Which attributes are highlighted or cropped in <code>_formatted</code>?</p> <p>No matter which attributes are retrieved in <code>_formatted</code> (according to the previous section &quot;Which attributes are present in <code>_formatted</code>?&quot;):</p> <ul><li>Only the attributes present in <code>attributesToHighlight</code> are highlighted.</li> <li>Only the attributes present in <code>attributesToCrop</code> are cropped.</li> <li>Attributes present in both are cropped and highlighted at the same time.</li></ul> <p>Some edge cases:</p> <ul><li>If cumulated fields in <code>attributesToHighlight</code> and <code>attributesToCrop</code> resolve to only having non-existent fields, <code>_formatted</code> is not returned.</li></ul> <p>Some examples:
<em>The examples work the same with <code>attributesToCrop</code></em></p> <p>Example 1:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;q&quot;</span><span class="token operator">:</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributesToHighlight&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The Hobbit&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. Tolkien&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;_formatted&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;em&gt;T&lt;/em&gt;he Hobbit&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. Tolkien&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>-&gt; All the attributes (so <code>id</code>, <code>title</code> and <code>author</code>) are returned in <code>_formatted</code> because by default <code>attributesToRetrieve</code> is set to <code>[&quot;*&quot;]</code>.
-&gt; Only <code>title</code> is highlighted.</p> <p>Example 2:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;q&quot;</span><span class="token operator">:</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributesToHighlight&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The Hobbit&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. Tolkien&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;_formatted&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;em&gt;T&lt;/em&gt;he Hobbit&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. &lt;em&gt;T&lt;/em&gt;olkien&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>-&gt; <code>id</code>, <code>title</code> and <code>author</code> are returned in <code>_formatted</code> because<code>attributesToHighlight</code> is set to <code>[&quot;*&quot;]</code> (but also <code>attributesToRetrieve</code> by default).
-&gt; Both <code>title</code> and <code>author</code> are highlighted because <code>attributesToHighlight</code> is set to <code>[&quot;*&quot;]</code>.</p> <p>Example 3:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;q&quot;</span><span class="token operator">:</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributesToRetrieve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributesToHighlight&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. Tolkien&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;_formatted&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;em&gt;T&lt;/em&gt;he Hobbit&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. Tolkien&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>-&gt; Only <code>author</code> is returned at the root of the document because defined in the <code>attributesToRetrieve</code>.
-&gt; Only <code>author</code> and <code>title</code> are returned in <code>_formatted</code> because the addition of <code>attributesToRetrieve</code> and <code>attributesToHighlight</code>.
-&gt; Only <code>title</code> is highlighted because the only one defined in <code>attributesToHighlight</code>.</p> <p>Example 4:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;q&quot;</span><span class="token operator">:</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributesToRetrieve&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributesToHighlight&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;hits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;_formatted&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;em&gt;T&lt;/em&gt;he Hobbit&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;J. R. R. &lt;em&gt;T&lt;/em&gt;olkien&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>-&gt; No attributes are returned at the root of the document because <code>attributesToRetrieve</code> is set to <code>[]</code>.
-&gt; All the attributes are returned in <code>_formatted</code> because <code>attributesToHighlight</code> is set to <code>[&quot;*&quot;]</code>.
-&gt; All the attributes are highlighted because <code>attributesToHighlight</code> is set to <code>[&quot;*&quot;]</code>.</p> <h6 id="_3-2-1-1-3-matchesposition"><a href="#_3-2-1-1-3-matchesposition" class="header-anchor">#</a> 3.2.1.1.3. <code>_matchesPosition</code></h6> <ul><li>Type: Object</li> <li>Required: False</li></ul> <p>Contains the location of each occurrence of queried terms across all fields. The <code>_matchesPosition</code> object is added to a search result when the <code>showMatchesPosition</code> search parameter is specified to true.</p> <p>The beginning of a matching term within a field is indicated by <code>start</code>, and its <code>length</code> by length.</p> <p><code>start</code> and <code>length</code> are measured in bytes and not the number of characters. For example, <code>ü</code> represents two bytes but one character.</p> <blockquote><p>See <a href="#3116-showmatchesposition">3.1.14. <code>showMatchesPosition</code></a> section.</p></blockquote> <h6 id="_3-2-1-1-4-rankingscore"><a href="#_3-2-1-1-4-rankingscore" class="header-anchor">#</a> 3.2.1.1.4. <code>_rankingScore</code></h6> <ul><li>Type: Number</li> <li>Required: False</li></ul> <p>The relevancy score of a document relative to the search query. Higher is better.</p> <p><code>1.0</code> indicates a perfect match, <code>0.0</code> no match at all (Meilisearch should not return documents that don't match the query).</p> <blockquote><p>See <a href="/specifications/text/0195-ranking-score.html#31-ranking-score">Ranking Score</a> for details.</p></blockquote> <h6 id="_3-2-1-1-5-rankingscoredetails"><a href="#_3-2-1-1-5-rankingscoredetails" class="header-anchor">#</a> 3.2.1.1.5. <code>_rankingScoreDetails</code></h6> <ul><li>Type: Object</li> <li>Required: False</li></ul> <p>The ranking score of a document per each ranking rule and relative to the search query.</p> <p>This object features one field for each applied ranking rule, whose values are an object with at least the field <code>order</code> indicating in which order this ranking rule has been applied.</p> <blockquote><p>See <a href="/specifications/text/0195-ranking-score.html#32-ranking-score-details">Ranking Score details</a> for details.</p></blockquote> <h6 id="_3-2-1-1-6-semanticscore-experimental"><a href="#_3-2-1-1-6-semanticscore-experimental" class="header-anchor">#</a> 3.2.1.1.6. <code>_semanticScore</code> <code>EXPERIMENTAL</code></h6> <ul><li>Type: Float</li> <li>Required: False</li></ul> <p>Contains the semantic similarity score of the document for a vector search when <code>vector</code> has been provided. The score is represented as a dot product.</p> <blockquote><p>See <a href="#3118-vector-experimental">3.1.18 <code>vector</code></a></p></blockquote> <h4 id="_3-2-2-limit"><a href="#_3-2-2-limit" class="header-anchor">#</a> 3.2.2. <code>limit</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the <code>limit</code> search parameter used for the query.
This field is returned only when:</p> <ul><li><code>limit</code> and/or <code>offset</code> are used as query parameters.</li> <li>None of <code>limit</code>, <code>offset</code>, <code>page</code>, <code>hitsPerPage</code> are used as a query parameter</li></ul> <p>See <a href="#3181-navigating-search-results-by-page-selection">details</a> on the different ways of navigating search results.</p> <blockquote><p>See <a href="#315-limit">3.1.5. <code>limit</code></a> section.</p></blockquote> <h4 id="_3-2-3-offset"><a href="#_3-2-3-offset" class="header-anchor">#</a> 3.2.3. <code>offset</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the <code>offset</code> search parameter used for the query.
This field is returned only when none of <code>page</code> and <code>hitsPerPage</code> are used as a query parameter.</p> <p>See <a href="#3181-navigating-search-results-by-page-selection">explanation</a> on the different ways of navigating search results.</p> <blockquote><p>See <a href="#316-offset">3.1.6. <code>offset</code> section</a> section.</p></blockquote> <h4 id="_3-2-4-estimatedtotalhits"><a href="#_3-2-4-estimatedtotalhits" class="header-anchor">#</a> 3.2.4. <code>estimatedTotalHits</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the estimated number of candidates for the search query. This field is returned only when <code>limit</code> or/and <code>offset</code> are used as a query parameter.</p> <p>This field is returned only when:</p> <ul><li><code>limit</code> and/or <code>offset</code> are used as query parameters.</li> <li>None of <code>limit</code>, <code>offset</code>, <code>page</code>, <code>hitsPerPage</code> are used as a query parameter</li></ul> <p>See <a href="#3181-navigating-search-results-by-page-selection">details</a> on the different ways of navigation search results.</p> <h4 id="_3-2-5-page"><a href="#_3-2-5-page" class="header-anchor">#</a> 3.2.5. <code>page</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the current search results page. This field is returned only when the <code>page selection</code> feature is enabled; see <a href="#3181-navigating-search-results-by-page-selection">details</a>.</p> <blockquote><p>See <a href="#317-page">3.1.7. <code>page</code> section</a> section.</p></blockquote> <h4 id="_3-2-6-hitsperpage"><a href="#_3-2-6-hitsperpage" class="header-anchor">#</a> 3.2.6. <code>hitsPerPage</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the number of results per page. This field is returned only when the <code>page selection</code> feature is enabled; see <a href="#3181-navigating-search-results-by-page-selection">details</a>.</p> <blockquote><p>See <a href="#318-hitsperpage">3.1.7. <code>hitsPerPage</code> section</a> section.</p></blockquote> <h4 id="_3-2-7-totalpages"><a href="#_3-2-7-totalpages" class="header-anchor">#</a> 3.2.7. <code>totalPages</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the total number of results pages. Calculated using [<code>hitsPerPage</code>]. Both <code>totalPages</code> and <code>totalHits</code> are computed until they reach the <a href="/specifications/text/0118-search-api.html#https://github.com/meilisearch/specifications/blob/main/text/157-pagination-setting-api.md#311-maxtotalhits"><code>pagination.maxTotalHits</code></a> number from the settings.</p> <p>This field is returned only when the <code>page selection</code> feature is enabled; see <a href="#3181-navigating-search-results-by-page-selection">details</a>.</p> <h4 id="_3-2-8-totalhits"><a href="#_3-2-8-totalhits" class="header-anchor">#</a> 3.2.8. <code>totalHits</code></h4> <ul><li>Type: Integer</li> <li>Required: False</li></ul> <p>Returns the total number of search results. Both <code>totalPages</code> and <code>totalHits</code> are computed until they reach the <a href="/specifications/text/0118-search-api.html#https://github.com/meilisearch/specifications/blob/main/text/157-pagination-setting-api.md#311-maxtotalhits"><code>pagination.maxTotalHits</code></a> number from the settings.</p> <p>This field is returned only when the <code>page selection</code> feature is enabled, see <a href="#3181-navigating-search-results-by-page-selection">details</a>.</p> <h4 id="_3-2-9-facetdistribution"><a href="#_3-2-9-facetdistribution" class="header-anchor">#</a> 3.2.9. <code>facetDistribution</code></h4> <ul><li>Type: Object</li> <li>Required: False</li></ul> <p>Added to the search response when <code>facets</code> is set for a search query. It contains the number of remaining candidates for each specified facet in the <code>facets</code> search parameter.</p> <p>If a field distributed as a facet contains no value, it is returned as a <code>facetDistribution</code> field with an empty object as value.</p> <blockquote><p>See <a href="#314-facets">3.1.4. <code>facets</code></a> section.</p></blockquote> <h4 id="_3-2-10-facetstats"><a href="#_3-2-10-facetstats" class="header-anchor">#</a> 3.2.10. <code>facetStats</code></h4> <ul><li>Type: Object</li> <li>Required: False</li></ul> <p>When using the <code>facets</code> parameter, the distributed facets that contain some numeric values are displayed in a <code>facetStats</code> object that contains, per facet, the numeric <code>min</code> and <code>max</code> values for that facet of all documents matching the search query.</p> <p>If none of the hits returned by the search query have a numeric value for a facet, this facet is not part of the <code>facetStats</code> object.</p> <p>It ignores string values even if parseable. e.g <code>&quot;21&quot;</code> isn't considered by the engine when computing the <code>facetStats</code> <code>min</code> and <code>max</code>.</p> <blockquote><p>See <a href="#314-facets">3.1.4. <code>facets</code></a> section.</p></blockquote> <h4 id="_3-2-11-processingtimems"><a href="#_3-2-11-processingtimems" class="header-anchor">#</a> 3.2.11. <code>processingTimeMs</code></h4> <ul><li>Type: Integer</li> <li>Required: True</li></ul> <p>Processing time of the search query in <strong>milliseconds</strong>.</p> <h4 id="_3-2-12-query"><a href="#_3-2-12-query" class="header-anchor">#</a> 3.2.12. <code>query</code></h4> <ul><li>Type: String</li> <li>Required: True</li> <li>Default: <code>&quot;&quot;</code></li></ul> <p>Query originating the response. Equals to the <code>q</code> search parameter.</p> <blockquote><p>See <a href="#311-q">3.1.1. <code>q</code></a> section.</p></blockquote> <h4 id="_3-2-13-vector-experimental"><a href="#_3-2-13-vector-experimental" class="header-anchor">#</a> 3.2.13. <code>vector</code> <code>EXPERIMENTAL</code></h4> <ul><li>Type: Array of Float</li> <li>Required: False</li></ul> <p>Vector query embedding originating the response. Equals to the <code>vector</code> search parameter if specified.</p> <blockquote><p>See <a href="#3118-vector-experimental">3.1.18. <code>vector</code></a></p></blockquote> <h2 id="_2-technical-details"><a href="#_2-technical-details" class="header-anchor">#</a> 2. Technical Details</h2> <p>n/a</p> <h2 id="_3-future-possibilities"><a href="#_3-future-possibilities" class="header-anchor">#</a> 3. Future Possibilities</h2> <ul><li>Add dedicated errors to replace <code>bad_request</code> error.</li></ul> <h3 id="_3-1-formatting-search-results"><a href="#_3-1-formatting-search-results" class="header-anchor">#</a> 3.1. Formatting Search Results</h3> <ul><li>Replaces <code>_matchesPosition</code> with chars position instead of bytes. It could also be a <code>mode</code> to choose <code>byte</code> or <code>char</code>.</li> <li>Move <code>attributesToHighlight</code>, <code>highlightPreTag</code>, <code>highlightPostTag</code>, <code>attributesToCrop</code>, <code>cropLength</code> and <code>cropMarker</code> into a <code>formatter</code> objet.</li> <li>Add an option to only highlight complete query term.</li> <li>Expose the <code>formatter</code> resource as an index setting.</li> <li>Highlight a phrase search as a single highlighted section.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/specifications/text/0117-typo-tolerance-setting-api.html" class="prev">
        Typo tolerance setting api
      </a></span> <span class="next"><a href="/specifications/text/0119-instance-options.html">
        Instance options
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20032470.js" defer></script><script src="/assets/js/3.4da56047.js" defer></script><script src="/assets/js/34.8f065dee.js" defer></script>
  </body>
</html>
